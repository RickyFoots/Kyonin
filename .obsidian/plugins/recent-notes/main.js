/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var I=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var O=Object.prototype.hasOwnProperty;var z=(w,f)=>{for(var e in f)I(w,e,{get:f[e],enumerable:!0})},$=(w,f,e,t)=>{if(f&&typeof f=="object"||typeof f=="function")for(let s of R(f))!O.call(w,s)&&s!==e&&I(w,s,{get:()=>f[s],enumerable:!(t=k(f,s))||t.enumerable});return w};var j=w=>$(I({},"__esModule",{value:!0}),w);var B={};z(B,{default:()=>V});module.exports=j(B);var o=require("obsidian"),p=require("obsidian"),_={maxNotesToShow:100,showMarkdownFiles:!0,showImageFiles:!0,showPDFFiles:!0,showAudioFiles:!0,showVideoFiles:!0,showCanvasFiles:!0,showCSVFiles:!0,excludedFolders:[],excludedFiles:[],previewLines:1,showTime:!0,pinnedNotes:[],dateFormat:"DD/MM/YYYY",propertyModified:"",density:"comfortable"},b={en:{recentNotes:"Recent notes",pinned:"Pinned",deleteFile:"Delete file",areYouSureDelete:'Are you sure you want to delete "{filename}"?',delete:"Delete",cancel:"Cancel",open:"Open",moveToPrevious:"Move to previous note",moveToNext:"Move to next note",today:"Today",yesterday:"Yesterday",previous7days:"Previous 7 days",previous30days:"Previous 30 days",daysago:"days ago",density:"Density",comfortable:"Comfortable",compact:"Compact",densityDesc:"Choose between comfortable (default) or compact display"},pl:{recentNotes:"Ostatnie notatki",pinned:"Przypi\u0119te",deleteFile:"Usu\u0144 plik",areYouSureDelete:'Czy na pewno chcesz usun\u0105\u0107 "{filename}"?',delete:"Usu\u0144",cancel:"Anuluj",open:"Otw\xF3rz",moveToPrevious:"Przejd\u017A do poprzedniej notatki",moveToNext:"Przejd\u017A do nast\u0119pnej notatki",today:"Dzisiaj",yesterday:"Wczoraj",previous7days:"Poprzednie 7 dni",previous30days:"Poprzednie 30 dni",daysago:"dni temu"},es:{recentNotes:"Notas recientes",pinned:"Fijadas",deleteFile:"Eliminar archivo",areYouSureDelete:'\xBFEst\xE1s seguro de que quieres eliminar "{filename}"?',delete:"Eliminar",cancel:"Cancelar",open:"Abrir",moveToPrevious:"Ir a la nota anterior",moveToNext:"Ir a la siguiente nota",today:"Hoy",yesterday:"Ayer",previous7days:"\xDAltimos 7 d\xEDas",previous30days:"\xDAltimos 30 d\xEDas",daysago:"d\xEDas atr\xE1s"},fr:{recentNotes:"Notes r\xE9centes",pinned:"\xC9pingl\xE9es",deleteFile:"Supprimer le fichier",areYouSureDelete:'\xCAtes-vous s\xFBr de vouloir supprimer "{filename}" ?',delete:"Supprimer",cancel:"Annuler",open:"Ouvrir",moveToPrevious:"Aller \xE0 la note pr\xE9c\xE9dente",moveToNext:"Aller \xE0 la note suivante",today:"Aujourd'hui",yesterday:"Hier",previous7days:"7 derniers jours",previous30days:"30 derniers jours",daysago:"jours"},de:{recentNotes:"Aktuelle Notizen",pinned:"Angeheftet",deleteFile:"Datei l\xF6schen",areYouSureDelete:'M\xF6chten Sie "{filename}" wirklich l\xF6schen?',delete:"L\xF6schen",cancel:"Abbrechen",open:"\xD6ffnen",moveToPrevious:"Zur vorherigen Notiz",moveToNext:"Zur n\xE4chsten Notiz",today:"Heute",yesterday:"Gestern",previous7days:"Letzte 7 Tage",previous30days:"Letzte 30 Tage",daysago:"Tage her"},it:{recentNotes:"Note recenti",pinned:"Appuntate",deleteFile:"Elimina file",areYouSureDelete:'Sei sicuro di voler eliminare "{filename}"?',delete:"Elimina",cancel:"Annulla",open:"Apri",moveToPrevious:"Vai alla nota precedente",moveToNext:"Vai alla nota successiva",today:"Oggi",yesterday:"Ieri",previous7days:"Ultimi 7 giorni",previous30days:"Ultimi 30 giorni",daysago:"giorni fa"},ja:{recentNotes:"\u6700\u8FD1\u306E\u30CE\u30FC\u30C8",pinned:"\u56FA\u5B9A\u6E08\u307F",deleteFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664",areYouSureDelete:'"{filename}"\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F',delete:"\u524A\u9664",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",open:"\u958B\u304F",moveToPrevious:"\u524D\u306E\u30CE\u30FC\u30C8\u3078",moveToNext:"\u6B21\u306E\u30CE\u30FC\u30C8\u3078",today:"\u4ECA\u65E5",yesterday:"\u6628\u65E5",previous7days:"\u904E\u53BB7\u65E5\u9593",previous30days:"\u904E\u53BB30\u65E5\u9593",daysago:"\u65E5\u524D"},ko:{recentNotes:"\uCD5C\uADFC \uB178\uD2B8",pinned:"\uACE0\uC815\uB428",deleteFile:"\uD30C\uC77C \uC0AD\uC81C",areYouSureDelete:'"{filename}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?',delete:"\uC0AD\uC81C",cancel:"\uCDE8\uC18C",open:"\uC5F4\uAE30",moveToPrevious:"\uC774\uC804 \uB178\uD2B8\uB85C",moveToNext:"\uB2E4\uC74C \uB178\uD2B8\uB85C",today:"\uC624\uB298",yesterday:"\uC5B4\uC81C",previous7days:"\uC9C0\uB09C 7\uC77C",previous30days:"\uC9C0\uB09C 30\uC77C",daysago:"\uC77C \uC804"},zh:{recentNotes:"\u6700\u8FD1\u7B14\u8BB0",pinned:"\u5DF2\u7F6E\u9876",deleteFile:"\u5220\u9664\u6587\u4EF6",areYouSureDelete:'\u786E\u5B9A\u8981\u5220\u9664"{filename}"\u5417\uFF1F',delete:"\u5220\u9664",cancel:"\u53D6\u6D88",open:"\u6253\u5F00",moveToPrevious:"\u79FB\u81F3\u4E0A\u4E00\u4E2A\u7B14\u8BB0",moveToNext:"\u79FB\u81F3\u4E0B\u4E00\u4E2A\u7B14\u8BB0",today:"\u4ECA\u5929",yesterday:"\u6628\u5929",previous7days:"\u6700\u8FD17\u5929",previous30days:"\u6700\u8FD130\u5929",daysago:"\u5929\u524D"},ru:{recentNotes:"\u041D\u0435\u0434\u0430\u0432\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",pinned:"\u0417\u0430\u043A\u0440\u0435\u043F\u043B\u0451\u043D\u043D\u044B\u0435",deleteFile:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u0430\u0439\u043B",areYouSureDelete:'\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C "{filename}"?',delete:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430",open:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",moveToPrevious:"\u041A \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0435",moveToNext:"\u041A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0435",today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",yesterday:"\u0412\u0447\u0435\u0440\u0430",previous7days:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 7 \u0434\u043D\u0435\u0439",previous30days:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 30 \u0434\u043D\u0435\u0439",daysago:"\u0434\u043D\u0435\u0439 \u043D\u0430\u0437\u0430\u0434"},pt:{recentNotes:"Notas recentes",pinned:"Fixadas",deleteFile:"Eliminar ficheiro",areYouSureDelete:'Tem a certeza que pretende eliminar "{filename}"?',delete:"Eliminar",cancel:"Cancelar",open:"Abrir",moveToPrevious:"Ir para a nota anterior",moveToNext:"Ir para a pr\xF3xima nota",today:"Hoje",yesterday:"Ontem",previous7days:"\xDAltimos 7 dias",previous30days:"\xDAltimos 30 dias",daysago:"dias atr\xE1s"},"pt-br":{recentNotes:"Notas recentes",pinned:"Fixadas",deleteFile:"Excluir arquivo",areYouSureDelete:'Tem certeza que deseja excluir "{filename}"?',delete:"Excluir",cancel:"Cancelar",open:"Abrir",moveToPrevious:"Ir para nota anterior",moveToNext:"Ir para pr\xF3xima nota",today:"Hoje",yesterday:"Ontem",previous7days:"\xDAltimos 7 dias",previous30days:"\xDAltimos 30 dias",daysago:"dias atr\xE1s"},hu:{recentNotes:"Legut\xF3bbi jegyzetek",pinned:"Kit\u0171zve",deleteFile:"F\xE1jl t\xF6rl\xE9se",areYouSureDelete:'Biztos, hogy t\xF6r\xF6lni akarod ezt: "{filename}"?',delete:"T\xF6rl\xE9s",cancel:"M\xE9gsem",open:"Megnyit\xE1s",moveToPrevious:"Ugr\xE1s az el\u0151z\u0151 jegyzetre",moveToNext:"Ugr\xE1s az k\xF6vetkez\u0151 jegyzetre",today:"Ma",yesterday:"Tegnap",previous7days:"Utols\xF3 7 nap",previous30days:"Utols\xF3 30 nap",daysago:"napja"}},H=()=>{var w;return((w=localStorage.getItem("language"))==null?void 0:w.toLowerCase())||"en"};function U(w){return H()}function C(w,f){let e=U(w);return b[e]&&b[e][f]?b[e][f]:b.en[f]}var L="recent-notes-view",M=class extends o.ItemView{constructor(e,t){super(e);this.refreshTimeout=null;this.lastActiveFile=null;this.firstLineCache=new Map;this.MAX_FILE_SIZE_FOR_PREVIEW=100*1024;this.CACHE_DURATION=5*60*1e3;this.lastEditedFile=null;this.currentFileIndex=-1;this.debouncedRefresh=()=>{this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(()=>{this.refreshView(),this.refreshTimeout=null},20)};this.plugin=t,this.containerEl.addClass("recent-notes-view")}moveToAdjacentNote(e){let t=this.getRecentFiles();if(t.length===0)return;let s=this.app.workspace.getActiveFile();if(!s){let d=e==="up"?t[t.length-1]:t[0];this.openFile(d);return}let a=t.findIndex(d=>d.path===s.path);if(a===-1){let d=e==="up"?t[t.length-1]:t[0];this.openFile(d);return}let n=e==="up"?a-1:a+1;n<0||(n>=t.length&&(n=0),this.openFile(t[n]))}getModifiedTime(e,t=!1){if(!t&&M.fileModifiedTimes.has(e)){let a=M.fileModifiedTimes.get(e);return a!==void 0?a:e.stat.mtime}if(M.fileModifiedTimes.set(e,e.stat.mtime),this.plugin.settings.propertyModified){let a=this.app.vault.getAbstractFileByPath(e.path);if(a instanceof o.TFile){let n=this.app.metadataCache.getFileCache(a);if(n&&n.frontmatter){let d=new Date(n.frontmatter[this.plugin.settings.propertyModified]).getTime();d&&M.fileModifiedTimes.set(e,d)}}}let s=M.fileModifiedTimes.get(e);return s!==void 0?s:e.stat.mtime}getRecentFiles(){let e=this.app.vault.getFiles().filter(a=>this.shouldRefreshForFile(a)),t=e.filter(a=>this.plugin.settings.pinnedNotes.includes(a.path)).sort((a,n)=>this.getModifiedTime(n,!0)-this.getModifiedTime(a,!0)),s=e.filter(a=>!this.plugin.settings.pinnedNotes.includes(a.path)).sort((a,n)=>this.getModifiedTime(n,!0)-this.getModifiedTime(a,!0));return[...t,...s].slice(0,this.plugin.settings.maxNotesToShow)}async openFile(e){let t=this.app.workspace.getMostRecentLeaf();t&&await t.openFile(e)}clearOldCache(){let e=Date.now();for(let[t,s]of this.firstLineCache.entries())e-s.timestamp>this.CACHE_DURATION&&this.firstLineCache.delete(t)}shouldRefreshForFile(e){if(!e)return!1;let t=e.path.toLowerCase();if(this.plugin.settings.excludedFolders.some(d=>{let v=d.toLowerCase().trim();return v&&t.startsWith(v+"/")})||this.plugin.settings.excludedFiles.some(d=>{let v=d.toLowerCase().trim();return v&&t===v}))return!1;let n=e.extension.toLowerCase();return this.plugin.settings.showMarkdownFiles&&n==="md"||this.plugin.settings.showImageFiles&&["png","jpg","jpeg","gif","bmp","svg"].includes(n)||this.plugin.settings.showPDFFiles&&n==="pdf"||this.plugin.settings.showAudioFiles&&["mp3","wav","m4a","ogg","3gp","flac","webm","aac"].includes(n)||this.plugin.settings.showVideoFiles&&["mp4","webm","ogv","mov","mkv"].includes(n)||this.plugin.settings.showCanvasFiles&&n==="canvas"||this.plugin.settings.showCSVFiles&&n==="csv"}clearCache(){this.firstLineCache.clear()}getViewType(){return L}getDisplayText(){return this.plugin.translate("recentNotes")}getIcon(){return"clock-10"}cleanMarkdownFormatting(e){return e=e.replace(/^#+\s+/g,""),e=e.replace(/[*_]{1,3}([^*_]+)[*_]{1,3}/g,"$1"),e=e.replace(/~~([^~]+)~~/g,"$1"),e=e.replace(/^[-*_]{3,}\s*$/g,""),e=e.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),e=e.replace(/`+/g,""),e=e.replace(/^>\s+/g,""),e=e.replace(/^- \[[x ]\]\s+/i,""),e=e.replace(/^[-*+]\s+/g,""),e=e.replace(/^\d+\.\s+/g,""),e=e.replace(/https?:\/\//g,""),e=e.replace(/www\./g,""),e.trim()}async getFirstLineOfFile(e){var a,n,d,v;let t=e.extension.toLowerCase();if(t!=="md"){let y=e.stat.size,l="";if(y<1024?l=`${y} B`:y<1024*1024?l=`${(y/1024).toFixed(1)} KB`:l=`${(y/(1024*1024)).toFixed(1)} MB`,["png","jpg","jpeg","gif","bmp","svg"].includes(t))return`Image file \u2022 ${l}`;if(t==="pdf")return`PDF document \u2022 ${l}`;if(["mp3","wav","m4a","ogg","3gp","flac","webm","aac"].includes(t))return`Audio file \u2022 ${l}`;if(["mp4","webm","ogv","mov","mkv"].includes(t))return`Video file \u2022 ${l}`;if(t==="canvas")return"Canvas file";if(t==="csv"){if(e.stat.size>this.MAX_FILE_SIZE_FOR_PREVIEW)return`CSV file \u2022 ${l}`;let F=this.firstLineCache.get(e.path);if(F&&Date.now()-F.timestamp<this.CACHE_DURATION)return F.line;try{let i=(a=(await this.app.vault.cachedRead(e)).split(`
`)[0])==null?void 0:a.trim();if(i){let r=`CSV \u2022 ${i.length>50?i.slice(0,47)+"...":i} \u2022 ${l}`;return this.firstLineCache.set(e.path,{line:r,timestamp:Date.now()}),r}return`CSV file \u2022 ${l}`}catch(E){return`CSV file \u2022 ${l}`}}return`${t.toUpperCase()} file \u2022 ${l}`}if(e.stat.size>this.MAX_FILE_SIZE_FOR_PREVIEW)return"Large markdown file";let s=this.firstLineCache.get(e.path);if(s&&Date.now()-s.timestamp<this.CACHE_DURATION)return s.line;try{let l=(await this.app.vault.cachedRead(e)).split(`
`),F=0;if(((n=l[0])==null?void 0:n.trim())==="---"){for(let i=1;i<l.length;i++)if(((d=l[i])==null?void 0:d.trim())==="---"){F=i+1;break}}let E=[];for(let i=F;i<l.length&&E.length<this.plugin.settings.previewLines;i++){let h=(v=l[i])==null?void 0:v.trim();if(h&&h!=="---"){let r=this.cleanMarkdownFormatting(h);r&&E.push(r)}}if(E.length>0){let i=E.join(`
`);return this.firstLineCache.set(e.path,{line:i,timestamp:Date.now()}),i}return"No additional text"}catch(y){return"Error reading file"}}getTimeSection(e){let t=(0,p.moment)();if(e.isSame(t,"day"))return this.plugin.translate("today");if(e.isSame(t.clone().subtract(1,"day"),"day"))return this.plugin.translate("yesterday");if(e.isAfter(t.clone().subtract(7,"days")))return this.plugin.translate("previous7days");if(e.isAfter(t.clone().subtract(30,"days")))return this.plugin.translate("previous30days");if(e.isSame(t,"year")){let s=e.format("MMMM");return s.charAt(0).toUpperCase()+s.slice(1)}return e.format("YYYY")}scrollToTodaySection(){let e=this.containerEl.children[1],t=Array.from(e.querySelectorAll("h6"));for(let s of t)if(s.textContent==="Today"){e.scrollTop>300&&s.scrollIntoView({behavior:"smooth",block:"start"});break}}async refreshView(){var E;let e=this.containerEl.children[1],t=e.scrollTop;e.empty(),document.body.setAttribute("data-recent-notes-density",this.plugin.settings.density);let s=this.app.vault.getFiles().filter(i=>this.shouldRefreshForFile(i)).sort((i,h)=>this.getModifiedTime(h,!0)-this.getModifiedTime(i,!0)).slice(0,this.plugin.settings.maxNotesToShow),a=s.filter(i=>this.plugin.settings.pinnedNotes.includes(i.path)),n=s.filter(i=>!this.plugin.settings.pinnedNotes.includes(i.path)),d="",v=this.app.workspace.getActiveFile(),y=this.lastEditedFile&&((E=s[0])==null?void 0:E.path)===this.lastEditedFile,l=s[0]&&this.plugin.settings.pinnedNotes.includes(s[0].path);v&&(this.lastActiveFile=v.path);let F=v?v.path:this.lastActiveFile;if(a.length>0){let i=e.createEl("h6"),h=i.createSpan({cls:"pin-icon-small"});(0,o.setIcon)(h,"pin"),i.createSpan({text:this.plugin.translate("pinned")});for(let r of a){let c=e.createEl("div",{cls:`recent-note-item ${F===r.path?"is-active":""}`}),m=(0,p.moment)(),u;if((0,p.moment)(this.getModifiedTime(r,!0)).isSame(m,"day")||(0,p.moment)(this.getModifiedTime(r,!0)).isSame(m.clone().subtract(1,"day"),"day"))u=(0,p.moment)(this.getModifiedTime(r)).format("HH:mm");else if((0,p.moment)(this.getModifiedTime(r)).isAfter(m.clone().subtract(7,"days")))if(this.plugin.settings.dateFormat==="RELATIVE"){let g=m.diff((0,p.moment)(this.getModifiedTime(r)),"days");u=g===0?this.plugin.translate("today"):g===1?this.plugin.translate("yesterday"):`${g} ${this.plugin.translate("daysago")}`}else u=(0,p.moment)(this.getModifiedTime(r)).format("dddd");else this.plugin.settings.dateFormat==="RELATIVE"?u=`${m.diff((0,p.moment)(this.getModifiedTime(r)),"days")} ${this.plugin.translate("daysago")}`:u=(0,p.moment)(this.getModifiedTime(r)).format(this.plugin.settings.dateFormat);if(this.plugin.settings.density==="compact"&&this.plugin.settings.showTime){let g=c.createEl("div",{cls:"recent-note-header"});if(g.createEl("div",{text:this.getFileDisplayName(r),cls:"recent-note-title"}),g.createEl("span",{text:u,cls:"recent-note-date"}),this.plugin.settings.previewLines>0){let T=this.plugin.settings.previewLines>1,S=await this.getFirstLineOfFile(r),D=c.createEl("div",{cls:`recent-note-preview ${T?"has-multiple-lines":""}`});S.split(`
`).forEach(N=>{D.createEl("div",{text:N,cls:"recent-note-preview-line"})})}}else{let g=c.createEl("div",{text:this.getFileDisplayName(r),cls:"recent-note-title"}),T=this.plugin.settings.previewLines>1,S=c.createEl("div",{cls:`recent-note-info ${T?"has-multiple-lines":""}`});if(this.plugin.settings.previewLines>0){let D=await this.getFirstLineOfFile(r),N=S.createEl("div",{cls:`recent-note-preview ${T?"has-multiple-lines":""}`});D.split(`
`).forEach(P=>{N.createEl("div",{text:P,cls:"recent-note-preview-line"})})}if(this.plugin.settings.showTime){let D=S.createEl("span",{text:u,cls:this.plugin.settings.previewLines>0&&T?"recent-note-date recent-note-date-below":"recent-note-date"})}}this.addFileItemEventListeners(c,r)}d=""}for(let i of n){let h=(0,p.moment)(this.getModifiedTime(i,!0)),r=this.getTimeSection(h);r!==d&&(d=r,e.createEl("h6",{text:r}));let c=e.createEl("div",{cls:`recent-note-item ${F===i.path?"is-active":""}`}),m=(0,p.moment)(),u;if((0,p.moment)(this.getModifiedTime(i,!0)).isSame(m,"day")||(0,p.moment)(this.getModifiedTime(i,!0)).isSame(m.clone().subtract(1,"day"),"day"))u=(0,p.moment)(this.getModifiedTime(i)).format("HH:mm");else if((0,p.moment)(this.getModifiedTime(i)).isAfter(m.clone().subtract(7,"days")))if(this.plugin.settings.dateFormat==="RELATIVE"){let g=m.diff((0,p.moment)(this.getModifiedTime(i)),"days");u=g===0?this.plugin.translate("today"):g===1?this.plugin.translate("yesterday"):`${g} ${this.plugin.translate("daysago")}`}else u=(0,p.moment)(this.getModifiedTime(i)).format("dddd");else this.plugin.settings.dateFormat==="RELATIVE"?u=`${m.diff((0,p.moment)(this.getModifiedTime(i)),"days")} ${this.plugin.translate("daysago")}`:u=(0,p.moment)(this.getModifiedTime(i)).format(this.plugin.settings.dateFormat);if(this.plugin.settings.density==="compact"&&this.plugin.settings.showTime){let g=c.createEl("div",{cls:"recent-note-header"});if(g.createEl("div",{text:this.getFileDisplayName(i),cls:"recent-note-title"}),g.createEl("span",{text:u,cls:"recent-note-date"}),this.plugin.settings.previewLines>0){let T=this.plugin.settings.previewLines>1,S=await this.getFirstLineOfFile(i),D=c.createEl("div",{cls:`recent-note-preview ${T?"has-multiple-lines":""}`});S.split(`
`).forEach(N=>{D.createEl("div",{text:N,cls:"recent-note-preview-line"})})}}else{let g=c.createEl("div",{text:this.getFileDisplayName(i),cls:"recent-note-title"}),T=this.plugin.settings.previewLines>1,S=c.createEl("div",{cls:`recent-note-info ${T?"has-multiple-lines":""}`});if(this.plugin.settings.previewLines>0){let D=await this.getFirstLineOfFile(i),N=S.createEl("div",{cls:`recent-note-preview ${T?"has-multiple-lines":""}`});D.split(`
`).forEach(P=>{N.createEl("div",{text:P,cls:"recent-note-preview-line"})})}if(this.plugin.settings.showTime){let D=S.createEl("span",{text:u,cls:this.plugin.settings.previewLines>0&&T?"recent-note-date recent-note-date-below":"recent-note-date"})}}this.addFileItemEventListeners(c,i)}y&&!l?this.scrollToTodaySection():e.scrollTop=t,this.lastEditedFile=null}addFileItemEventListeners(e,t){let s=0,a=!1,n=0,d=0,v=0,y=!1,l=i=>{i.preventDefault(),i.stopPropagation()},F=i=>{i.preventDefault(),i.stopPropagation()},E=()=>{window.removeEventListener("click",l,!0),window.removeEventListener("contextmenu",F,!0),window.addEventListener("click",l,!0),window.addEventListener("contextmenu",F,!0),setTimeout(()=>{window.removeEventListener("click",l,!0),window.removeEventListener("contextmenu",F,!0)},1e3)};e.addEventListener("touchstart",i=>{Date.now()-n<1e3||(a=!0,s=Date.now(),i.touches.length>0&&(d=i.touches[0].clientY,v=i.touches[0].clientX),y=!1)}),e.addEventListener("touchmove",i=>{if(i.touches.length>0){let h=Math.abs(i.touches[0].clientY-d),r=Math.abs(i.touches[0].clientX-v);(h>10||r>10)&&(y=!0)}}),e.addEventListener("touchend",async i=>{if(Date.now()-n<1e3||y)return;if(Date.now()-s<500)i.preventDefault(),i.stopPropagation(),await this.app.workspace.getLeaf(!1).openFile(t),n=Date.now(),t.extension!=="md"&&setTimeout(()=>{this.debouncedRefresh()},50),E();else{i.preventDefault(),i.stopPropagation();let r=i.changedTouches[0],c=new o.Menu,m=this.plugin.settings.pinnedNotes.includes(t.path);c.addItem(u=>{u.setIcon(m?"pin-off":"pin").setTitle(m?"Unpin":"Pin").onClick(async()=>{m?this.plugin.settings.pinnedNotes=this.plugin.settings.pinnedNotes.filter(g=>g!==t.path):this.plugin.settings.pinnedNotes.push(t.path),await this.plugin.saveSettings(),this.refreshView()})}),c.addItem(u=>{u.setIcon("trash").setTitle("Delete").onClick(async()=>{if(!await this.app.vault.adapter.exists(t.path))return;new A(this.app,t.path,async()=>{await this.app.fileManager.trashFile(t),this.refreshView()}).open()})}),c.addSeparator(),this.app.workspace.trigger("file-menu",c,t,"recent-notes-view",null),c.showAtPosition({x:r.clientX,y:r.clientY})}}),e.addEventListener("mousedown",async i=>{if(a||i.button!==0)return;i.preventDefault(),i.stopPropagation(),await this.app.workspace.getLeaf(i.metaKey||i.ctrlKey).openFile(t),t.extension!=="md"&&setTimeout(()=>{this.debouncedRefresh()},50)}),e.addEventListener("mouseover",i=>{t!=null&&t.path&&this.app.workspace.trigger("hover-link",{event:i,source:L,hoverParent:this.containerEl,targetEl:e,linktext:t.path})}),e.addEventListener("contextmenu",i=>{if(a||Date.now()-n<1e3){y||(i.preventDefault(),i.stopPropagation());return}i.preventDefault();let h=new o.Menu,r=this.plugin.settings.pinnedNotes.includes(t.path);h.addItem(c=>{c.setIcon(r?"pin-off":"pin").setTitle(r?"Unpin":"Pin").onClick(async()=>{r?this.plugin.settings.pinnedNotes=this.plugin.settings.pinnedNotes.filter(m=>m!==t.path):this.plugin.settings.pinnedNotes.push(t.path),await this.plugin.saveSettings(),this.refreshView()})}),h.addItem(c=>{c.setIcon("trash").setTitle("Delete").onClick(async()=>{if(!await this.app.vault.adapter.exists(t.path))return;new A(this.app,t.path,async()=>{await this.app.fileManager.trashFile(t),this.refreshView()}).open()})}),h.addSeparator(),this.app.workspace.trigger("file-menu",h,t,"recent-notes-view",null),h.showAtPosition({x:i.clientX,y:i.clientY})})}async onOpen(){this.registerInterval(window.setInterval(()=>this.clearOldCache(),this.CACHE_DURATION)),document.body.setAttribute("data-recent-notes-density",this.plugin.settings.density),await this.refreshView(),this.registerEvent(this.app.vault.on("modify",e=>{e instanceof o.TFile&&(this.firstLineCache.delete(e.path),this.lastEditedFile=e.path);let t=this.app.workspace.getActiveFile();this.shouldRefreshForFile(t)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("create",e=>{e instanceof o.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("delete",e=>{e instanceof o.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("rename",e=>{e instanceof o.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{let e=this.app.workspace.getActiveFile();this.shouldRefreshForFile(e)&&this.debouncedRefresh()}))}async onClose(){this.refreshTimeout&&clearTimeout(this.refreshTimeout),document.body.removeAttribute("data-recent-notes-density")}getFileDisplayName(e){if(e.extension!=="md")return e.basename;let t=this.app.metadataCache.getFileCache(e);return t&&t.frontmatter&&t.frontmatter.title?t.frontmatter.title:e.basename}},x=M;x.fileModifiedTimes=new Map;var A=class extends o.Modal{constructor(e,t,s){super(e);this.filename=t;this.onConfirm=s}onOpen(){let{contentEl:e,titleEl:t}=this;t.setText(C(this.app,"deleteFile")),e.createEl("p").setText(C(this.app,"areYouSureDelete").replace("{filename}",this.filename));let s=e.createDiv({cls:"modal-button-container"});s.createEl("button",{cls:"mod-warning",text:C(this.app,"delete")}).addEventListener("click",()=>{this.onConfirm(),this.close()}),s.createEl("button",{text:C(this.app,"cancel")}).addEventListener("click",()=>{this.close()})}onClose(){let{contentEl:e}=this;e.empty()}},V=class extends o.Plugin{async onload(){await this.loadSettings(),this.registerView(L,e=>this.view=new x(e,this)),this.app.workspace.trigger("parse-style-settings"),this.addRibbonIcon("clock-10",this.translate("recentNotes"),()=>{this.activateView()}),this.addCommand({id:"show-recent-notes",name:this.translate("open"),callback:()=>{this.activateView()}}),this.addCommand({id:"move-to-previous-recent-note",name:this.translate("moveToPrevious"),callback:()=>{this.view&&this.view.moveToAdjacentNote("up")}}),this.addCommand({id:"move-to-next-recent-note",name:this.translate("moveToNext"),callback:()=>{this.view&&this.view.moveToAdjacentNote("down")}}),this.addSettingTab(new Y(this.app,this))}async activateView(){let{workspace:e}=this.app,t=e.getLeavesOfType(L)[0];t||(t=e.getLeftLeaf(!1),t&&await t.setViewState({type:L,active:!0})),t&&e.revealLeaf(t)}async loadSettings(){this.settings=Object.assign({},_,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}translate(e){return C(this.app,e)}},Y=class extends o.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new o.Setting(e).setName("Date format").setDesc("Format for displaying dates older than 7 days").addDropdown(t=>t.addOption("RELATIVE","X days ago (relative)").addOption("DD/MM/YYYY","19/08/2025").addOption("M/D/YY","8/19/25").addOption("D/M/YY","19/8/25").addOption("M/D/YYYY","8/19/2025").addOption("DD.MM.YYYY","19.08.2025").addOption("DD-MM-YYYY","19-08-2025").addOption("YYYY/M/D","2025/8/19").addOption("YYYY.MM.DD","2025.08.19").addOption("YYYY-MM-DD","2025-08-19").setValue(this.plugin.settings.dateFormat).onChange(async s=>{this.plugin.settings.dateFormat=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Maximum notes to show").setDesc("How many recent notes to display in the view").addText(t=>t.setPlaceholder("100").setValue(this.plugin.settings.maxNotesToShow.toString()).onChange(async s=>{let a=parseInt(s);isNaN(a)||(this.plugin.settings.maxNotesToShow=a,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView())})),new o.Setting(e).setName("Preview lines").setDesc("Number of text lines to show in the preview (0-3)").addDropdown(t=>t.addOption("0","No preview").addOption("1","1 line").addOption("2","2 lines").addOption("3","3 lines").setValue(this.plugin.settings.previewLines.toString()).onChange(async s=>{this.plugin.settings.previewLines=parseInt(s),await this.plugin.saveSettings(),this.plugin.view&&(this.plugin.view.clearCache(),await this.plugin.view.refreshView())})),new o.Setting(e).setName("Show time").setDesc("Show modification time next to files (set both this and Preview lines to 0 for minimal view)").addToggle(t=>t.setValue(this.plugin.settings.showTime).onChange(async s=>{this.plugin.settings.showTime=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName(this.plugin.translate("density")).setDesc(this.plugin.translate("densityDesc")).addDropdown(t=>t.addOption("comfortable",this.plugin.translate("comfortable")).addOption("compact",this.plugin.translate("compact")).setValue(this.plugin.settings.density).onChange(async s=>{this.plugin.settings.density=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Excluded folders").setDesc("List of folders to exclude from recent files (one per line)").addTextArea(t=>t.setPlaceholder(`folder1
folder2/subfolder`).setValue(this.plugin.settings.excludedFolders.join(`
`)).onChange(async s=>{let a=s.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);this.plugin.settings.excludedFolders=a,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Excluded files").setDesc("List of specific files to exclude from recent files (one per line, full path required)").addTextArea(t=>t.setPlaceholder(`folder1/note.md
folder2/image.png`).setValue(this.plugin.settings.excludedFiles.join(`
`)).onChange(async s=>{let a=s.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);this.plugin.settings.excludedFiles=a,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Custom Modified Date property").setDesc("Specify a frontmatter property to use for modification date (leave empty to use file modification date)").addText(t=>t.setPlaceholder("modified").setValue(this.plugin.settings.propertyModified.toString()).onChange(async s=>{this.plugin.settings.propertyModified=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),e.createEl("h3",{text:"File types to show"}),new o.Setting(e).setName("Show Markdown files").setDesc("Show .md files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showMarkdownFiles).onChange(async s=>{this.plugin.settings.showMarkdownFiles=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Image files").setDesc("Show image files (png, jpg, gif, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showImageFiles).onChange(async s=>{this.plugin.settings.showImageFiles=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show PDF files").setDesc("Show .pdf files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showPDFFiles).onChange(async s=>{this.plugin.settings.showPDFFiles=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Audio files").setDesc("Show audio files (mp3, wav, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showAudioFiles).onChange(async s=>{this.plugin.settings.showAudioFiles=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Video files").setDesc("Show video files (mp4, webm, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showVideoFiles).onChange(async s=>{this.plugin.settings.showVideoFiles=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Canvas files").setDesc("Show .canvas files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showCanvasFiles).onChange(async s=>{this.plugin.settings.showCanvasFiles=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show CSV files").setDesc("Show .csv files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showCSVFiles).onChange(async s=>{this.plugin.settings.showCSVFiles=s,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()}))}};

/* nosourcemap */