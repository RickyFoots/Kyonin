/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var V=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var R=Object.prototype.hasOwnProperty;var z=(p,d)=>{for(var e in d)V(p,e,{get:d[e],enumerable:!0})},j=(p,d,e,t)=>{if(d&&typeof d=="object"||typeof d=="function")for(let i of O(d))!R.call(p,i)&&i!==e&&V(p,i,{get:()=>d[i],enumerable:!(t=k(d,i))||t.enumerable});return p};var $=p=>j(V({},"__esModule",{value:!0}),p);var B={};z(B,{default:()=>x});module.exports=$(B);var o=require("obsidian"),c=require("obsidian"),_={maxNotesToShow:100,showMarkdownFiles:!0,showImageFiles:!0,showPDFFiles:!0,showAudioFiles:!0,showVideoFiles:!0,showCanvasFiles:!0,showCSVFiles:!0,excludedFolders:[],excludedFiles:[],previewLines:1,pinnedNotes:[],dateFormat:"DD/MM/YYYY",propertyModified:""},C={en:{recentNotes:"Recent notes",pinned:"Pinned",deleteFile:"Delete file",areYouSureDelete:'Are you sure you want to delete "{filename}"?',delete:"Delete",cancel:"Cancel",open:"Open",moveToPrevious:"Move to previous note",moveToNext:"Move to next note",today:"Today",yesterday:"Yesterday",previous7days:"Previous 7 days",previous30days:"Previous 30 days"},pl:{recentNotes:"Ostatnie notatki",pinned:"Przypi\u0119te",deleteFile:"Usu\u0144 plik",areYouSureDelete:'Czy na pewno chcesz usun\u0105\u0107 "{filename}"?',delete:"Usu\u0144",cancel:"Anuluj",open:"Otw\xF3rz",moveToPrevious:"Przejd\u017A do poprzedniej notatki",moveToNext:"Przejd\u017A do nast\u0119pnej notatki",today:"Dzisiaj",yesterday:"Wczoraj",previous7days:"Ostatnie 7 dni",previous30days:"Ostatnie 30 dni"},es:{recentNotes:"Notas recientes",pinned:"Fijadas",deleteFile:"Eliminar archivo",areYouSureDelete:'\xBFEst\xE1s seguro de que quieres eliminar "{filename}"?',delete:"Eliminar",cancel:"Cancelar",open:"Abrir",moveToPrevious:"Ir a la nota anterior",moveToNext:"Ir a la siguiente nota",today:"Hoy",yesterday:"Ayer",previous7days:"\xDAltimos 7 d\xEDas",previous30days:"\xDAltimos 30 d\xEDas"},fr:{recentNotes:"Notes r\xE9centes",pinned:"\xC9pingl\xE9es",deleteFile:"Supprimer le fichier",areYouSureDelete:'\xCAtes-vous s\xFBr de vouloir supprimer "{filename}" ?',delete:"Supprimer",cancel:"Annuler",open:"Ouvrir",moveToPrevious:"Aller \xE0 la note pr\xE9c\xE9dente",moveToNext:"Aller \xE0 la note suivante",today:"Aujourd'hui",yesterday:"Hier",previous7days:"7 derniers jours",previous30days:"30 derniers jours"},de:{recentNotes:"Aktuelle Notizen",pinned:"Angeheftet",deleteFile:"Datei l\xF6schen",areYouSureDelete:'M\xF6chten Sie "{filename}" wirklich l\xF6schen?',delete:"L\xF6schen",cancel:"Abbrechen",open:"\xD6ffnen",moveToPrevious:"Zur vorherigen Notiz",moveToNext:"Zur n\xE4chsten Notiz",today:"Heute",yesterday:"Gestern",previous7days:"Letzte 7 Tage",previous30days:"Letzte 30 Tage"},it:{recentNotes:"Note recenti",pinned:"Appuntate",deleteFile:"Elimina file",areYouSureDelete:'Sei sicuro di voler eliminare "{filename}"?',delete:"Elimina",cancel:"Annulla",open:"Apri",moveToPrevious:"Vai alla nota precedente",moveToNext:"Vai alla nota successiva",today:"Oggi",yesterday:"Ieri",previous7days:"Ultimi 7 giorni",previous30days:"Ultimi 30 giorni"},ja:{recentNotes:"\u6700\u8FD1\u306E\u30CE\u30FC\u30C8",pinned:"\u56FA\u5B9A\u6E08\u307F",deleteFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664",areYouSureDelete:'"{filename}"\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F',delete:"\u524A\u9664",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",open:"\u958B\u304F",moveToPrevious:"\u524D\u306E\u30CE\u30FC\u30C8\u3078",moveToNext:"\u6B21\u306E\u30CE\u30FC\u30C8\u3078",today:"\u4ECA\u65E5",yesterday:"\u6628\u65E5",previous7days:"\u904E\u53BB7\u65E5\u9593",previous30days:"\u904E\u53BB30\u65E5\u9593"},ko:{recentNotes:"\uCD5C\uADFC \uB178\uD2B8",pinned:"\uACE0\uC815\uB428",deleteFile:"\uD30C\uC77C \uC0AD\uC81C",areYouSureDelete:'"{filename}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?',delete:"\uC0AD\uC81C",cancel:"\uCDE8\uC18C",open:"\uC5F4\uAE30",moveToPrevious:"\uC774\uC804 \uB178\uD2B8\uB85C",moveToNext:"\uB2E4\uC74C \uB178\uD2B8\uB85C",today:"\uC624\uB298",yesterday:"\uC5B4\uC81C",previous7days:"\uC9C0\uB09C 7\uC77C",previous30days:"\uC9C0\uB09C 30\uC77C"},zh:{recentNotes:"\u6700\u8FD1\u7B14\u8BB0",pinned:"\u5DF2\u7F6E\u9876",deleteFile:"\u5220\u9664\u6587\u4EF6",areYouSureDelete:'\u786E\u5B9A\u8981\u5220\u9664"{filename}"\u5417\uFF1F',delete:"\u5220\u9664",cancel:"\u53D6\u6D88",open:"\u6253\u5F00",moveToPrevious:"\u79FB\u81F3\u4E0A\u4E00\u4E2A\u7B14\u8BB0",moveToNext:"\u79FB\u81F3\u4E0B\u4E00\u4E2A\u7B14\u8BB0",today:"\u4ECA\u5929",yesterday:"\u6628\u5929",previous7days:"\u6700\u8FD17\u5929",previous30days:"\u6700\u8FD130\u5929"},ru:{recentNotes:"\u041D\u0435\u0434\u0430\u0432\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",pinned:"\u0417\u0430\u043A\u0440\u0435\u043F\u043B\u0451\u043D\u043D\u044B\u0435",deleteFile:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u0430\u0439\u043B",areYouSureDelete:'\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C "{filename}"?',delete:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430",open:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",moveToPrevious:"\u041A \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0435",moveToNext:"\u041A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0435",today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",yesterday:"\u0412\u0447\u0435\u0440\u0430",previous7days:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 7 \u0434\u043D\u0435\u0439",previous30days:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 30 \u0434\u043D\u0435\u0439"},pt:{recentNotes:"Notas recentes",pinned:"Fixadas",deleteFile:"Eliminar ficheiro",areYouSureDelete:'Tem a certeza que pretende eliminar "{filename}"?',delete:"Eliminar",cancel:"Cancelar",open:"Abrir",moveToPrevious:"Ir para a nota anterior",moveToNext:"Ir para a pr\xF3xima nota",today:"Hoje",yesterday:"Ontem",previous7days:"\xDAltimos 7 dias",previous30days:"\xDAltimos 30 dias"},"pt-br":{recentNotes:"Notas recentes",pinned:"Fixadas",deleteFile:"Excluir arquivo",areYouSureDelete:'Tem certeza que deseja excluir "{filename}"?',delete:"Excluir",cancel:"Cancelar",open:"Abrir",moveToPrevious:"Ir para nota anterior",moveToNext:"Ir para pr\xF3xima nota",today:"Hoje",yesterday:"Ontem",previous7days:"\xDAltimos 7 dias",previous30days:"\xDAltimos 30 dias"},hu:{recentNotes:"Legut\xF3bbi jegyzetek",pinned:"Kit\u0171zve",deleteFile:"F\xE1jl t\xF6rl\xE9se",areYouSureDelete:'Biztos, hogy t\xF6r\xF6lni akarod ezt: "{filename}"?',delete:"T\xF6rl\xE9s",cancel:"M\xE9gsem",open:"Megnyit\xE1s",moveToPrevious:"Ugr\xE1s az el\u0151z\u0151 jegyzetre",moveToNext:"Ugr\xE1s az k\xF6vetkez\u0151 jegyzetre",today:"Ma",yesterday:"Tegnap",previous7days:"Utols\xF3 7 nap",previous30days:"Utols\xF3 30 nap"}},U=()=>{var p;return((p=localStorage.getItem("language"))==null?void 0:p.toLowerCase())||"en"};function H(p){return U()}function N(p,d){let e=H(p);return C[e]&&C[e][d]?C[e][d]:C.en[d]}var M="recent-notes-view",T=class extends o.ItemView{constructor(e,t){super(e);this.refreshTimeout=null;this.lastActiveFile=null;this.firstLineCache=new Map;this.MAX_FILE_SIZE_FOR_PREVIEW=100*1024;this.CACHE_DURATION=5*60*1e3;this.lastEditedFile=null;this.currentFileIndex=-1;this.debouncedRefresh=()=>{this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(()=>{this.refreshView(),this.refreshTimeout=null},20)};this.plugin=t,this.containerEl.addClass("recent-notes-view")}moveToAdjacentNote(e){let t=this.getRecentFiles();if(t.length===0)return;let i=this.app.workspace.getActiveFile();if(!i){let r=e==="up"?t[t.length-1]:t[0];this.openFile(r);return}let n=t.findIndex(r=>r.path===i.path);if(n===-1){let r=e==="up"?t[t.length-1]:t[0];this.openFile(r);return}let a=e==="up"?n-1:n+1;a<0||(a>=t.length&&(a=0),this.openFile(t[a]))}getModifiedTime(e,t=!1){if(!t&&T.fileModifiedTimes.has(e)){let n=T.fileModifiedTimes.get(e);return n!==void 0?n:e.stat.mtime}if(T.fileModifiedTimes.set(e,e.stat.mtime),this.plugin.settings.propertyModified){let n=this.app.vault.getAbstractFileByPath(e.path);if(n instanceof o.TFile){let a=this.app.metadataCache.getFileCache(n);if(a&&a.frontmatter){let r=new Date(a.frontmatter[this.plugin.settings.propertyModified]).getTime();r&&T.fileModifiedTimes.set(e,r)}}}let i=T.fileModifiedTimes.get(e);return i!==void 0?i:e.stat.mtime}getRecentFiles(){let e=this.app.vault.getFiles().filter(n=>this.shouldRefreshForFile(n)),t=e.filter(n=>this.plugin.settings.pinnedNotes.includes(n.path)).sort((n,a)=>this.getModifiedTime(a,!0)-this.getModifiedTime(n,!0)),i=e.filter(n=>!this.plugin.settings.pinnedNotes.includes(n.path)).sort((n,a)=>this.getModifiedTime(a,!0)-this.getModifiedTime(n,!0));return[...t,...i].slice(0,this.plugin.settings.maxNotesToShow)}async openFile(e){let t=this.app.workspace.getMostRecentLeaf();t&&await t.openFile(e)}clearOldCache(){let e=Date.now();for(let[t,i]of this.firstLineCache.entries())e-i.timestamp>this.CACHE_DURATION&&this.firstLineCache.delete(t)}shouldRefreshForFile(e){if(!e)return!1;let t=e.path.toLowerCase();if(this.plugin.settings.excludedFolders.some(r=>{let h=r.toLowerCase().trim();return h&&t.startsWith(h+"/")})||this.plugin.settings.excludedFiles.some(r=>{let h=r.toLowerCase().trim();return h&&t===h}))return!1;let a=e.extension.toLowerCase();return this.plugin.settings.showMarkdownFiles&&a==="md"||this.plugin.settings.showImageFiles&&["png","jpg","jpeg","gif","bmp","svg"].includes(a)||this.plugin.settings.showPDFFiles&&a==="pdf"||this.plugin.settings.showAudioFiles&&["mp3","wav","m4a","ogg","3gp","flac","webm","aac"].includes(a)||this.plugin.settings.showVideoFiles&&["mp4","webm","ogv","mov","mkv"].includes(a)||this.plugin.settings.showCanvasFiles&&a==="canvas"||this.plugin.settings.showCSVFiles&&a==="csv"}clearCache(){this.firstLineCache.clear()}getViewType(){return M}getDisplayText(){return this.plugin.translate("recentNotes")}getIcon(){return"clock-10"}cleanMarkdownFormatting(e){return e=e.replace(/^#+\s+/g,""),e=e.replace(/[*_]{1,3}([^*_]+)[*_]{1,3}/g,"$1"),e=e.replace(/~~([^~]+)~~/g,"$1"),e=e.replace(/^[-*_]{3,}\s*$/g,""),e=e.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),e=e.replace(/`+/g,""),e=e.replace(/^>\s+/g,""),e=e.replace(/^- \[[x ]\]\s+/i,""),e=e.replace(/^[-*+]\s+/g,""),e=e.replace(/^\d+\.\s+/g,""),e=e.replace(/https?:\/\//g,""),e=e.replace(/www\./g,""),e.trim()}async getFirstLineOfFile(e){var n,a,r,h;let t=e.extension.toLowerCase();if(t!=="md"){let g=e.stat.size,l="";if(g<1024?l=`${g} B`:g<1024*1024?l=`${(g/1024).toFixed(1)} KB`:l=`${(g/(1024*1024)).toFixed(1)} MB`,["png","jpg","jpeg","gif","bmp","svg"].includes(t))return`Image file \u2022 ${l}`;if(t==="pdf")return`PDF document \u2022 ${l}`;if(["mp3","wav","m4a","ogg","3gp","flac","webm","aac"].includes(t))return`Audio file \u2022 ${l}`;if(["mp4","webm","ogv","mov","mkv"].includes(t))return`Video file \u2022 ${l}`;if(t==="canvas")return"Canvas file";if(t==="csv"){if(e.stat.size>this.MAX_FILE_SIZE_FOR_PREVIEW)return`CSV file \u2022 ${l}`;let f=this.firstLineCache.get(e.path);if(f&&Date.now()-f.timestamp<this.CACHE_DURATION)return f.line;try{let s=(n=(await this.app.vault.cachedRead(e)).split(`
`)[0])==null?void 0:n.trim();if(s){let m=`CSV \u2022 ${s.length>50?s.slice(0,47)+"...":s} \u2022 ${l}`;return this.firstLineCache.set(e.path,{line:m,timestamp:Date.now()}),m}return`CSV file \u2022 ${l}`}catch(v){return`CSV file \u2022 ${l}`}}return`${t.toUpperCase()} file \u2022 ${l}`}if(e.stat.size>this.MAX_FILE_SIZE_FOR_PREVIEW)return"Large markdown file";let i=this.firstLineCache.get(e.path);if(i&&Date.now()-i.timestamp<this.CACHE_DURATION)return i.line;try{let l=(await this.app.vault.cachedRead(e)).split(`
`),f=0;if(((a=l[0])==null?void 0:a.trim())==="---"){for(let s=1;s<l.length;s++)if(((r=l[s])==null?void 0:r.trim())==="---"){f=s+1;break}}let v=[];for(let s=f;s<l.length&&v.length<this.plugin.settings.previewLines;s++){let u=(h=l[s])==null?void 0:h.trim();if(u&&u!=="---"){let m=this.cleanMarkdownFormatting(u);m&&v.push(m)}}if(v.length>0){let s=v.join(`
`);return this.firstLineCache.set(e.path,{line:s,timestamp:Date.now()}),s}return"No additional text"}catch(g){return"Error reading file"}}getTimeSection(e){let t=(0,c.moment)();if(e.isSame(t,"day"))return this.plugin.translate("today");if(e.isSame(t.clone().subtract(1,"day"),"day"))return this.plugin.translate("yesterday");if(e.isAfter(t.clone().subtract(7,"days")))return this.plugin.translate("previous7days");if(e.isAfter(t.clone().subtract(30,"days")))return this.plugin.translate("previous30days");if(e.isSame(t,"year")){let i=e.format("MMMM");return i.charAt(0).toUpperCase()+i.slice(1)}return e.format("YYYY")}scrollToTodaySection(){let e=this.containerEl.children[1],t=Array.from(e.querySelectorAll("h6"));for(let i of t)if(i.textContent==="Today"){e.scrollTop>300&&i.scrollIntoView({behavior:"smooth",block:"start"});break}}async refreshView(){var v;let e=this.containerEl.children[1],t=e.scrollTop;e.empty();let i=this.app.vault.getFiles().filter(s=>this.shouldRefreshForFile(s)).sort((s,u)=>this.getModifiedTime(u,!0)-this.getModifiedTime(s,!0)).slice(0,this.plugin.settings.maxNotesToShow),n=i.filter(s=>this.plugin.settings.pinnedNotes.includes(s.path)),a=i.filter(s=>!this.plugin.settings.pinnedNotes.includes(s.path)),r="",h=this.app.workspace.getActiveFile(),g=this.lastEditedFile&&((v=i[0])==null?void 0:v.path)===this.lastEditedFile,l=i[0]&&this.plugin.settings.pinnedNotes.includes(i[0].path);h&&(this.lastActiveFile=h.path);let f=h?h.path:this.lastActiveFile;if(n.length>0){e.createEl("h6",{text:this.plugin.translate("pinned")});for(let s of n){let u=e.createEl("div",{cls:`recent-note-item ${f===s.path?"is-active":""}`}),m=u.createEl("div",{text:s.basename,cls:"recent-note-title"}),w=this.plugin.settings.previewLines>1,b=u.createEl("div",{cls:`recent-note-info ${w?"has-multiple-lines":""}`}),F=(0,c.moment)(),y;(0,c.moment)(this.getModifiedTime(s,!0)).isSame(F,"day")||(0,c.moment)(this.getModifiedTime(s,!0)).isSame(F.clone().subtract(1,"day"),"day")?y=(0,c.moment)(this.getModifiedTime(s)).format("HH:mm"):(0,c.moment)(this.getModifiedTime(s)).isAfter(F.clone().subtract(7,"days"))?y=(0,c.moment)(this.getModifiedTime(s)).format("dddd"):y=(0,c.moment)(this.getModifiedTime(s)).format(this.plugin.settings.dateFormat);let E=await this.getFirstLineOfFile(s),S=b.createEl("div",{cls:`recent-note-preview ${w?"has-multiple-lines":""}`});E.split(`
`).forEach(L=>{S.createEl("div",{text:L,cls:"recent-note-preview-line"})});let P=b.createEl("span",{text:y,cls:w?"recent-note-date recent-note-date-below":"recent-note-date"});this.addFileItemEventListeners(u,s)}r=""}for(let s of a){let u=(0,c.moment)(this.getModifiedTime(s,!0)),m=this.getTimeSection(u);m!==r&&(r=m,e.createEl("h6",{text:m}));let w=e.createEl("div",{cls:`recent-note-item ${f===s.path?"is-active":""}`}),b=w.createEl("div",{text:s.basename,cls:"recent-note-title"}),F=this.plugin.settings.previewLines>1,y=w.createEl("div",{cls:`recent-note-info ${F?"has-multiple-lines":""}`}),E=(0,c.moment)(),S;(0,c.moment)(this.getModifiedTime(s)).isSame(E,"day")||(0,c.moment)(this.getModifiedTime(s)).isSame(E.clone().subtract(1,"day"),"day")?S=(0,c.moment)(this.getModifiedTime(s)).format("HH:mm"):(0,c.moment)(this.getModifiedTime(s)).isAfter(E.clone().subtract(7,"days"))?S=(0,c.moment)(this.getModifiedTime(s)).format("dddd"):S=(0,c.moment)(this.getModifiedTime(s)).format(this.plugin.settings.dateFormat);let P=await this.getFirstLineOfFile(s),L=y.createEl("div",{cls:`recent-note-preview ${F?"has-multiple-lines":""}`});P.split(`
`).forEach(I=>{L.createEl("div",{text:I,cls:"recent-note-preview-line"})});let W=y.createEl("span",{text:S,cls:F?"recent-note-date recent-note-date-below":"recent-note-date"});this.addFileItemEventListeners(w,s)}g&&!l?this.scrollToTodaySection():e.scrollTop=t,this.lastEditedFile=null}addFileItemEventListeners(e,t){e.addEventListener("mousedown",async i=>{if(i.button!==0)return;i.preventDefault(),i.stopPropagation(),await this.app.workspace.getLeaf(i.metaKey||i.ctrlKey).openFile(t),t.extension!=="md"&&setTimeout(()=>{this.debouncedRefresh()},50)}),e.addEventListener("mouseover",i=>{t!=null&&t.path&&this.app.workspace.trigger("hover-link",{event:i,source:M,hoverParent:this.containerEl,targetEl:e,linktext:t.path})}),e.addEventListener("contextmenu",i=>{i.preventDefault();let n=new o.Menu,a=this.plugin.settings.pinnedNotes.includes(t.path);n.addItem(r=>{r.setIcon(a?"pin-off":"pin").setTitle(a?"Unpin":"Pin").onClick(async()=>{a?this.plugin.settings.pinnedNotes=this.plugin.settings.pinnedNotes.filter(h=>h!==t.path):this.plugin.settings.pinnedNotes.push(t.path),await this.plugin.saveSettings(),this.refreshView()})}),n.addItem(r=>{r.setIcon("trash").setTitle("Delete").onClick(async()=>{if(!await this.app.vault.adapter.exists(t.path))return;new A(this.app,t.path,async()=>{await this.app.fileManager.trashFile(t),this.refreshView()}).open()})}),n.addSeparator(),this.app.workspace.trigger("file-menu",n,t,"recent-notes-view",null),n.showAtPosition({x:i.clientX,y:i.clientY})})}async onOpen(){this.registerInterval(window.setInterval(()=>this.clearOldCache(),this.CACHE_DURATION)),await this.refreshView(),this.registerEvent(this.app.vault.on("modify",e=>{e instanceof o.TFile&&(this.firstLineCache.delete(e.path),this.lastEditedFile=e.path);let t=this.app.workspace.getActiveFile();this.shouldRefreshForFile(t)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("create",e=>{e instanceof o.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("delete",e=>{e instanceof o.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("rename",e=>{e instanceof o.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{let e=this.app.workspace.getActiveFile();this.shouldRefreshForFile(e)&&this.debouncedRefresh()}))}async onClose(){this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},D=T;D.fileModifiedTimes=new Map;var A=class extends o.Modal{constructor(e,t,i){super(e);this.filename=t;this.onConfirm=i}onOpen(){let{contentEl:e,titleEl:t}=this;t.setText(N(this.app,"deleteFile")),e.createEl("p").setText(N(this.app,"areYouSureDelete").replace("{filename}",this.filename));let i=e.createDiv({cls:"modal-button-container"});i.createEl("button",{cls:"mod-warning",text:N(this.app,"delete")}).addEventListener("click",()=>{this.onConfirm(),this.close()}),i.createEl("button",{text:N(this.app,"cancel")}).addEventListener("click",()=>{this.close()})}onClose(){let{contentEl:e}=this;e.empty()}},x=class extends o.Plugin{async onload(){await this.loadSettings(),this.registerView(M,e=>this.view=new D(e,this)),this.app.workspace.trigger("parse-style-settings"),this.addRibbonIcon("clock-10",this.translate("recentNotes"),()=>{this.activateView()}),this.addCommand({id:"show-recent-notes",name:this.translate("open"),callback:()=>{this.activateView()}}),this.addCommand({id:"move-to-previous-recent-note",name:this.translate("moveToPrevious"),callback:()=>{this.view&&this.view.moveToAdjacentNote("up")}}),this.addCommand({id:"move-to-next-recent-note",name:this.translate("moveToNext"),callback:()=>{this.view&&this.view.moveToAdjacentNote("down")}}),this.addSettingTab(new Y(this.app,this))}async activateView(){let{workspace:e}=this.app,t=e.getLeavesOfType(M)[0];t||(t=e.getLeftLeaf(!1),t&&await t.setViewState({type:M,active:!0})),t&&e.revealLeaf(t)}async loadSettings(){this.settings=Object.assign({},_,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}translate(e){return N(this.app,e)}},Y=class extends o.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new o.Setting(e).setName("Date format").setDesc("Format for displaying dates older than 7 days").addDropdown(t=>t.addOption("DD/MM/YYYY","19/08/2025").addOption("M/D/YY","8/19/25").addOption("D/M/YY","19/8/25").addOption("M/D/YYYY","8/19/2025").addOption("DD.MM.YYYY","19.08.2025").addOption("DD-MM-YYYY","19-08-2025").addOption("YYYY/M/D","2025/8/19").addOption("YYYY.MM.DD","2025.08.19").addOption("YYYY-MM-DD","2025-08-19").setValue(this.plugin.settings.dateFormat).onChange(async i=>{this.plugin.settings.dateFormat=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Maximum notes to show").setDesc("How many recent notes to display in the view").addText(t=>t.setPlaceholder("100").setValue(this.plugin.settings.maxNotesToShow.toString()).onChange(async i=>{let n=parseInt(i);isNaN(n)||(this.plugin.settings.maxNotesToShow=n,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView())})),new o.Setting(e).setName("Preview lines").setDesc("Number of text lines to show in the preview (1-3)").addDropdown(t=>t.addOption("1","1 line").addOption("2","2 lines").addOption("3","3 lines").setValue(this.plugin.settings.previewLines.toString()).onChange(async i=>{this.plugin.settings.previewLines=parseInt(i),await this.plugin.saveSettings(),this.plugin.view&&(this.plugin.view.clearCache(),await this.plugin.view.refreshView())})),new o.Setting(e).setName("Excluded folders").setDesc("List of folders to exclude from recent files (one per line)").addTextArea(t=>t.setPlaceholder(`folder1
folder2/subfolder`).setValue(this.plugin.settings.excludedFolders.join(`
`)).onChange(async i=>{let n=i.split(`
`).map(a=>a.trim()).filter(a=>a.length>0);this.plugin.settings.excludedFolders=n,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Excluded files").setDesc("List of specific files to exclude from recent files (one per line, full path required)").addTextArea(t=>t.setPlaceholder(`folder1/note.md
folder2/image.png`).setValue(this.plugin.settings.excludedFiles.join(`
`)).onChange(async i=>{let n=i.split(`
`).map(a=>a.trim()).filter(a=>a.length>0);this.plugin.settings.excludedFiles=n,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Custom Modified Date property").setDesc("Specify a frontmatter property to use for modification date (leave empty to use file modification date)").addText(t=>t.setPlaceholder("modified").setValue(this.plugin.settings.propertyModified.toString()).onChange(async i=>{this.plugin.settings.propertyModified=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),e.createEl("h3",{text:"File types to show"}),new o.Setting(e).setName("Show Markdown files").setDesc("Show .md files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showMarkdownFiles).onChange(async i=>{this.plugin.settings.showMarkdownFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Image files").setDesc("Show image files (png, jpg, gif, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showImageFiles).onChange(async i=>{this.plugin.settings.showImageFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show PDF files").setDesc("Show .pdf files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showPDFFiles).onChange(async i=>{this.plugin.settings.showPDFFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Audio files").setDesc("Show audio files (mp3, wav, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showAudioFiles).onChange(async i=>{this.plugin.settings.showAudioFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Video files").setDesc("Show video files (mp4, webm, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showVideoFiles).onChange(async i=>{this.plugin.settings.showVideoFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show Canvas files").setDesc("Show .canvas files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showCanvasFiles).onChange(async i=>{this.plugin.settings.showCanvasFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new o.Setting(e).setName("Show CSV files").setDesc("Show .csv files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showCSVFiles).onChange(async i=>{this.plugin.settings.showCSVFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()}))}};

/* nosourcemap */