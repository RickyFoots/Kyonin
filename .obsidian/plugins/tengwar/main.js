/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var u=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var R=Object.prototype.hasOwnProperty;var N=(e,s)=>{for(var t in s)u(e,t,{get:s[t],enumerable:!0})},_=(e,s,t,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let n of F(s))!R.call(e,n)&&n!==t&&u(e,n,{get:()=>s[n],enumerable:!(o=x(s,n))||o.enumerable});return e};var y=e=>_(u({},"__esModule",{value:!0}),e);var G={};N(G,{default:()=>p});module.exports=y(G);var d=(e={})=>({isHighlightedTehtar:!1,tehtarColor:"",tengAsciiFont:"annatar",tengCsurFont:"alcarin",tengwarKeywrod:"",...e});var g=d({isHighlightedTehtar:!0,tehtarColor:"#A78AF9",tengCsurFont:"telcontar",tengAsciiFont:"annatar",tengwarKeywrod:"teng"});var m={annatar:"Annatar",eldamar:"Eldamar",primate:"Primate"};var T={alcarin:"Alcarin",artano:"Artano (italic)",telcontar:"Telcontar",freemono:"Free Mono"};var i=require("obsidian"),l=class extends i.PluginSettingTab{constructor(t,o){super(t,o);this.plugin=o}display(){let{containerEl:t}=this;t.empty(),new i.Setting(t).setName("Turn on Tehtar highlighting").setDesc("Signs and symbols written above or below letters will be highlighted").addToggle(o=>o.setValue(this.plugin.settings.isHighlightedTehtar).onChange(async n=>{this.plugin.settings.isHighlightedTehtar=n,await this.plugin.saveSettings(),this.plugin.refresh()})),new i.Setting(t).setName("Color").setDesc("Color of highlighted Tehtars").then(o=>{let n;o.addColorPicker(r=>(n=r,r.setValue(this.plugin.settings.tehtarColor).onChange(async a=>{this.plugin.settings.tehtarColor=a,await this.plugin.saveSettings(),this.plugin.refresh()}),r)).addExtraButton(r=>{r.setIcon("lucide-rotate-ccw").setTooltip("Reset to default").onClick(async()=>{let a=g.tehtarColor;this.plugin.settings.tehtarColor=a,n.setValue(a),await this.plugin.saveSettings(),this.plugin.refresh()})})}),new i.Setting(t).setName("Font settings").setHeading(),new i.Setting(t).setName("Tengwar ASCII font").setDesc("Font family for ASCII tengwar words").addDropdown(o=>o.addOptions(m).setValue(this.plugin.settings.tengAsciiFont).onChange(async n=>{this.plugin.settings.tengAsciiFont=n,await this.plugin.saveSettings(),this.plugin.refresh()})),new i.Setting(t).setName("Tengwar CSUR font").setDesc("Font family for CSUR tengwar words").addDropdown(o=>o.addOptions(T).setValue(this.plugin.settings.tengCsurFont).onChange(async n=>{this.plugin.settings.tengCsurFont=n,await this.plugin.saveSettings(),this.plugin.refresh()})),new i.Setting(t).setName("Codeblock settings").setHeading(),new i.Setting(t).setName("Tengwar keyword").setDesc("Keyword for Tengwar blocks (Reload required)").then(o=>{let n;o.addText(r=>(n=r,r.setPlaceholder("teng").setValue(this.plugin.settings.tengwarKeywrod).onChange(async a=>{this.plugin.settings.tengwarKeywrod=a,await this.plugin.saveSettings(),this.plugin.refresh()}),r)).addExtraButton(r=>{r.setIcon("lucide-rotate-ccw").setTooltip("Reset to default").onClick(async()=>{let a=g.tengwarKeywrod;this.plugin.settings.tengwarKeywrod=a,n.setValue(a),await this.plugin.saveSettings(),this.plugin.refresh()})})})}};var f=e=>[e,`${e}-annatar`,`${e}-eldamar`,`${e}-primate`,`${e}-alcarin`,`${e}-artano`,`${e}-telcontar`,`${e}-freemono`];var C=/[\uE000-\uE07F]/;var w=/[\uE040-\uE05D]/;var E=e=>C.test(e)?"CSUR":"ASCII";var S=(e,s,t)=>{if(t&&t!==s.tengwarKeywrod)return t.split("-")[1];switch(e){case"CSUR":return s.tengCsurFont;case"ASCII":return s.tengAsciiFont}};var c=(e,s,t,o)=>{let n=E(e);L(s,e,t);let r=o||t.tengwarKeywrod;s.id=r,s.classList.add("tengwarBlock"),s.classList.add(S(n,t,r))},L=(e,s,t)=>{for(let o of s)if(w.test(o)){let n=document.createElement("span");n.classList.add("tehtar"),n.style.color=t.isHighlightedTehtar?t.tehtarColor:"unset",n.textContent=o,e.appendChild(n)}else if(o===`
`){let n=document.createElement("br");e.appendChild(n)}else{let n=document.createTextNode(o);e.appendChild(n)}};var h=e=>e?Array.from(e.childNodes).map(s=>{if(s.nodeType===Node.TEXT_NODE)return s.textContent||"";if(s.nodeType===Node.ELEMENT_NODE){let t=s;return t.tagName==="BR"?`
`:h(t)}return""}).join(""):"";var P=e=>{document.querySelectorAll(`[id^="${e.tengwarKeywrod}"]`).forEach(t=>{let o=h(t),n=t.id;t.textContent="",t.className="",t.id="",c(o,t,e,n)})};var A=require("obsidian"),p=class extends A.Plugin{refresh(){P(this.settings)}async onload(){await this.loadSettings(),this.registerTengwarProcessors(),this.addSettingTab(new l(this.app,this))}registerTengwarProcessors(){f(this.settings.tengwarKeywrod).forEach(t=>{this.registerMarkdownCodeBlockProcessor(t,(o,n)=>{c(o,n,this.settings,t)})})}async loadSettings(){this.settings=Object.assign({},g,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};

/* nosourcemap */