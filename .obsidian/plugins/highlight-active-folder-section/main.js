/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FolderHighlighter
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  highlightedFolderColor: "#eeeeee",
  highlightFolderTitleColor: false,
  highlightedFolderTitleColor: "#ffffff00",
  highlightedFolderTextColor: "#000000",
  highlightParentFolder: false,
  highlightedParentFolderColor: "#dddddd",
  highlightedParentFolderTextColor: "#000000",
  highlightedFolderBorderRadius: "5px",
  highlightedParentFolderBorderRadius: "5px",
  highlightedFolderFontWeight: "bold",
  highlightedParentFolderFontWeight: "bold"
};
var FolderHighlighter = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.styleEl = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new FolderHighlighterSettingTab(this.app, this));
    this.updateStyles();
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        this.highlightFolders();
      })
    );
    this.app.workspace.onLayoutReady(() => {
      this.highlightFolders();
      this.updateStyles();
      setTimeout(() => {
        this.updateStyles();
        this.highlightFolders();
      }, 500);
    });
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.updateStyles();
  }
  highlightFolders() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile)
      return;
    const allFolders = document.querySelectorAll(".nav-folder");
    allFolders.forEach((folder) => {
      folder.classList.remove("highlighted-folder", "highlighted-parent-folder");
    });
    const currentFolder = this.getParentFolderElement(activeFile.path);
    if (currentFolder) {
      currentFolder.classList.add("highlighted-folder");
      if (this.settings.highlightParentFolder) {
        const rootFolder = this.getRootFolderInPath(activeFile.path);
        if (rootFolder && rootFolder !== currentFolder) {
          rootFolder.classList.add("highlighted-parent-folder");
        }
      }
    }
  }
  getParentFolderElement(filePath) {
    const folderPaths = filePath.split("/");
    folderPaths.pop();
    let folderElement = null;
    while (folderPaths.length > 0) {
      const folderName = folderPaths.join("/");
      const possibleFolderElement = document.querySelector(`[data-path="${folderName}"]`);
      if (possibleFolderElement) {
        folderElement = possibleFolderElement.closest(".nav-folder");
        break;
      }
      folderPaths.pop();
    }
    return folderElement;
  }
  getRootFolderInPath(filePath) {
    var _a;
    const folderPaths = filePath.split("/");
    folderPaths.pop();
    if (folderPaths.length > 0) {
      const rootFolderName = folderPaths[0];
      return ((_a = document.querySelector(`[data-path="${rootFolderName}"]`)) == null ? void 0 : _a.closest(".nav-folder")) || null;
    }
    return null;
  }
  updateStyles() {
    if (!this.styleEl) {
      this.styleEl = document.createElement("style");
      this.styleEl.id = "folder-highlighter-styles";
      document.head.appendChild(this.styleEl);
    }
    const styleContent = `
            .highlighted-folder {
                background-color: ${this.settings.highlightedFolderColor} !important;
                border-radius: ${this.settings.highlightedFolderBorderRadius} !important;
            }
            .highlighted-folder > .nav-folder-title {
                ${this.settings.highlightFolderTitleColor ? `background-color: ${this.settings.highlightedFolderTitleColor} !important;` : ""}
                color: ${this.settings.highlightedFolderTextColor} !important;
                border-radius: ${this.settings.highlightedFolderBorderRadius} !important;
                font-weight: ${this.settings.highlightedFolderFontWeight} !important
            }
            .highlighted-parent-folder {
                background-color: ${this.settings.highlightedParentFolderColor} !important;
                border-radius: ${this.settings.highlightedParentFolderBorderRadius} !important;
            }
            .highlighted-parent-folder > .nav-folder-title {
                color: ${this.settings.highlightedParentFolderTextColor} !important;
                font-weight: ${this.settings.highlightedParentFolderFontWeight} !important;
                border-radius: ${this.settings.highlightedParentFolderBorderRadius} !important;
            }
        `;
    this.styleEl.textContent = styleContent;
  }
  onunload() {
    if (this.styleEl) {
      this.styleEl.remove();
    }
  }
};
var FolderHighlighterSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Active folder").setHeading();
    const createColorSetting = (name, desc, key) => {
      let savedColor = this.plugin.settings[key];
      let alphaValue = 1;
      if (typeof savedColor === "string") {
        const match2 = savedColor.match(/rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/);
        if (match2) {
          alphaValue = parseFloat(match2[4]);
        }
      }
      const match = savedColor.match(/rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/);
      if (match) {
        alphaValue = parseFloat(match[4]);
      }
      new import_obsidian.Setting(containerEl).setName(name).setDesc(desc).addText((text) => {
        var _a, _b, _c;
        text.setPlaceholder("#eeeeee").setValue(savedColor.toString()).onChange(async (value) => {
          this.plugin.settings[key] = value;
          await this.plugin.saveSettings();
        });
        text.inputEl.classList.add("input-width-150");
        const colorPicker = document.createElement("input");
        colorPicker.type = "color";
        const rgbColor = this.extractRgbFromRgba(savedColor.toString());
        colorPicker.value = this.rgbToHex(rgbColor);
        colorPicker.title = "Choose a color";
        colorPicker.addEventListener("input", async (event) => {
          const value = event.target.value;
          const rgb = this.hexToRgb(value);
          this.plugin.settings[key] = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alphaValue})`;
          await this.plugin.saveSettings();
          text.setValue(this.plugin.settings[key]);
        });
        (_a = text.inputEl.parentElement) == null ? void 0 : _a.appendChild(colorPicker);
        const transparencySlider = document.createElement("input");
        transparencySlider.type = "range";
        transparencySlider.min = "0";
        transparencySlider.max = "1";
        transparencySlider.step = "0.01";
        transparencySlider.value = alphaValue.toString();
        transparencySlider.classList.add("margin-left-10");
        transparencySlider.title = "Move the slider to adjust transparency";
        transparencySlider.addEventListener("input", async (event) => {
          alphaValue = parseFloat(event.target.value);
          const rgb = this.hexToRgb(colorPicker.value);
          this.plugin.settings[key] = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alphaValue})`;
          await this.plugin.saveSettings();
          text.setValue(this.plugin.settings[key]);
        });
        (_b = text.inputEl.parentElement) == null ? void 0 : _b.appendChild(transparencySlider);
        const resetButton = document.createElement("button");
        resetButton.textContent = "Reset";
        resetButton.title = "Reset to previous color";
        resetButton.classList.add("margin-left-10");
        resetButton.addEventListener("click", async () => {
          this.plugin.settings[key] = savedColor;
          await this.plugin.saveSettings();
          const rgbColor2 = this.extractRgbFromRgba(savedColor.toString());
          colorPicker.value = this.rgbToHex(rgbColor2);
          const alpha = this.extractAlphaFromRgba(savedColor.toString());
          transparencySlider.value = alpha.toString();
          text.setValue(savedColor.toString());
        });
        (_c = text.inputEl.parentElement) == null ? void 0 : _c.appendChild(resetButton);
      });
    };
    createColorSetting("Folder section background-color", "Choose a background-color of the active folder-container.", "highlightedFolderColor");
    new import_obsidian.Setting(containerEl).setName("Folder background color").setDesc("Enable background-color of the folder title.").addToggle((toggle) => toggle.setValue(this.plugin.settings.highlightFolderTitleColor).onChange(async (value) => {
      this.plugin.settings.highlightFolderTitleColor = value;
      if (!value) {
        this.plugin.settings.highlightedFolderTitleColor = "#ffffff00";
      }
      await this.plugin.saveSettings();
      this.display();
      this.plugin.updateStyles();
    }));
    if (this.plugin.settings.highlightFolderTitleColor) {
      createColorSetting("Folder background-color", "Choose a color for the highlighted folder title.", "highlightedFolderTitleColor");
    }
    createColorSetting("Folder text color", "Choose a color for the highlighted folder text.", "highlightedFolderTextColor");
    new import_obsidian.Setting(containerEl).setName("Highlighted folder font weight").setDesc("Set the font weight of the highlighted folder titles.").addDropdown((dropdown) => dropdown.addOption("200", "Thin").addOption("400", "Normal").addOption("700", "Bold").setValue(this.plugin.settings.highlightedFolderFontWeight || "700").onChange(async (value) => {
      this.plugin.settings.highlightedFolderFontWeight = value;
      await this.plugin.saveSettings();
      this.plugin.updateStyles();
    }));
    new import_obsidian.Setting(containerEl).setName("Folder border radius").setDesc("Set the border radius of the highlighted folder.").addSlider(
      (slider) => slider.setLimits(0, 50, 1).setValue(parseInt(this.plugin.settings.highlightedFolderBorderRadius)).onChange(async (value) => {
        const radiusWithPx = `${value}px`;
        this.plugin.settings.highlightedFolderBorderRadius = radiusWithPx;
        await this.plugin.saveSettings();
        this.plugin.updateStyles();
      }).setDynamicTooltip()
      // Adds a tooltip showing the current value
    );
    new import_obsidian.Setting(containerEl).setName("Root folder").setHeading();
    new import_obsidian.Setting(containerEl).setName("Highlight root folder").setDesc("Enable background-color of the root folder segment in the path to the active note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.highlightParentFolder).onChange(async (value) => {
      this.plugin.settings.highlightParentFolder = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.highlightParentFolder) {
      createColorSetting("Root folder section background-color", "Choose a background-color of the root folder segment.", "highlightedParentFolderColor");
      createColorSetting("Root folder text color", "Choose a color for the highlighted root folder text.", "highlightedParentFolderTextColor");
      new import_obsidian.Setting(containerEl).setName("Highlighted root folder font weight").setDesc("Set the font weight of the highlighted parent folder titles.").addDropdown((dropdown) => dropdown.addOption("200", "Thin").addOption("400", "Normal").addOption("700", "Bold").setValue(this.plugin.settings.highlightedParentFolderFontWeight || "700").onChange(async (value) => {
        this.plugin.settings.highlightedParentFolderFontWeight = value;
        await this.plugin.saveSettings();
        this.plugin.updateStyles();
      }));
      new import_obsidian.Setting(containerEl).setName("Root folder border radius").setDesc("Set the border radius of the highlighted root folder.").addSlider((slider) => slider.setLimits(0, 50, 1).setValue(parseInt(this.plugin.settings.highlightedParentFolderBorderRadius)).onChange(async (value) => {
        const radiusWithPx = `${value}px`;
        this.plugin.settings.highlightedParentFolderBorderRadius = radiusWithPx;
        await this.plugin.saveSettings();
        this.plugin.updateStyles();
      }).setDynamicTooltip());
    }
  }
  // Helper function to convert hex color to RGB
  hexToRgb(hex) {
    const bigint = parseInt(hex.slice(1), 16);
    const r = bigint >> 16 & 255;
    const g = bigint >> 8 & 255;
    const b = bigint & 255;
    return { r, g, b };
  }
  // Helper function to extract RGB values from RGBA string
  extractRgbFromRgba(rgba) {
    const match = rgba.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
      return {
        r: parseInt(match[1]),
        g: parseInt(match[2]),
        b: parseInt(match[3])
      };
    }
    return { r: 0, g: 0, b: 0 };
  }
  // Helper function to extract alpha value from RGBA string
  extractAlphaFromRgba(rgba) {
    const match = rgba.match(/rgba?\(.*?,\s*([\d.]+)\)/);
    return match ? parseFloat(match[1]) : 1;
  }
  // Helper function to convert RGB to HEX
  rgbToHex(rgb) {
    return "#" + ((1 << 24) + (rgb.r << 16) + (rgb.g << 8) + rgb.b).toString(16).slice(1);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgRm9sZGVySGlnaGxpZ2h0ZXJTZXR0aW5ncyB7XHJcbiAgICBoaWdobGlnaHRlZEZvbGRlckNvbG9yOiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRGb2xkZXJUaXRsZUNvbG9yOiBib29sZWFuO1xyXG4gICAgaGlnaGxpZ2h0ZWRGb2xkZXJUaXRsZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRlZEZvbGRlclRleHRDb2xvcjogc3RyaW5nO1xyXG4gICAgaGlnaGxpZ2h0UGFyZW50Rm9sZGVyOiBib29sZWFuO1xyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJDb2xvcjogc3RyaW5nO1xyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJUZXh0Q29sb3I6IHN0cmluZztcclxuICAgIGhpZ2hsaWdodGVkRm9sZGVyQm9yZGVyUmFkaXVzOiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRlZFBhcmVudEZvbGRlckJvcmRlclJhZGl1czogc3RyaW5nO1xyXG4gICAgaGlnaGxpZ2h0ZWRGb2xkZXJGb250V2VpZ2h0OiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRlZFBhcmVudEZvbGRlckZvbnRXZWlnaHQ6IHN0cmluZztcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRm9sZGVySGlnaGxpZ2h0ZXJTZXR0aW5ncyA9IHtcclxuICAgIGhpZ2hsaWdodGVkRm9sZGVyQ29sb3I6ICcjZWVlZWVlJyxcclxuICAgIGhpZ2hsaWdodEZvbGRlclRpdGxlQ29sb3I6IGZhbHNlLFxyXG4gICAgaGlnaGxpZ2h0ZWRGb2xkZXJUaXRsZUNvbG9yOiAnI2ZmZmZmZjAwJyxcclxuXHRoaWdobGlnaHRlZEZvbGRlclRleHRDb2xvcjogJyMwMDAwMDAnLFxyXG4gICAgaGlnaGxpZ2h0UGFyZW50Rm9sZGVyOiBmYWxzZSxcclxuICAgIGhpZ2hsaWdodGVkUGFyZW50Rm9sZGVyQ29sb3I6ICcjZGRkZGRkJyxcclxuXHRoaWdobGlnaHRlZFBhcmVudEZvbGRlclRleHRDb2xvcjogJyMwMDAwMDAnLFxyXG4gICAgaGlnaGxpZ2h0ZWRGb2xkZXJCb3JkZXJSYWRpdXM6ICc1cHgnLFxyXG4gICAgaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJCb3JkZXJSYWRpdXM6ICc1cHgnLFxyXG4gICAgaGlnaGxpZ2h0ZWRGb2xkZXJGb250V2VpZ2h0OiAnYm9sZCcsXHJcbiAgICBoaWdobGlnaHRlZFBhcmVudEZvbGRlckZvbnRXZWlnaHQ6ICdib2xkJ1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sZGVySGlnaGxpZ2h0ZXIgZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IEZvbGRlckhpZ2hsaWdodGVyU2V0dGluZ3M7XHJcbiAgICBwcml2YXRlIHN0eWxlRWw6IEhUTUxTdHlsZUVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBhc3luYyBvbmxvYWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBGb2xkZXJIaWdobGlnaHRlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gQXBwbHkgc3R5bGVzIGltbWVkaWF0ZWx5IGFmdGVyIGxvYWRpbmdcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xyXG5cclxuICAgICAgICAvLyBSZWdpc3RlciBldmVudCB0byB1cGRhdGUgdGhlIGhpZ2hsaWdodGVkIGZvbGRlciB3aGVuIHRoZSBhY3RpdmUgbm90ZSBjaGFuZ2VzXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxyXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRGb2xkZXJzKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0IHRoZSBwYXJlbnQgZm9sZGVyIGFuZCBhcHBseSBzdHlsZXMgd2hlbiB0aGUgbGF5b3V0IGlzIHJlYWR5XHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEZvbGRlcnMoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBhIHNob3J0IHRpbWVvdXQgdG8gZW5zdXJlIHN0eWxlcyBhcmUgYXBwbGllZCBhZnRlciBldmVyeXRoaW5nIGlzIGxvYWRlZFxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEZvbGRlcnMoKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWdobGlnaHRGb2xkZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgYWxsIHByZXZpb3VzIGhpZ2hsaWdodHNcclxuICAgICAgICBjb25zdCBhbGxGb2xkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtZm9sZGVyXCIpO1xyXG4gICAgICAgIGFsbEZvbGRlcnMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGZvbGRlci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0ZWQtZm9sZGVyXCIsIFwiaGlnaGxpZ2h0ZWQtcGFyZW50LWZvbGRlclwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0IHRoZSBmb2xkZXIgY29udGFpbmluZyB0aGUgYWN0aXZlIG5vdGVcclxuICAgICAgICBjb25zdCBjdXJyZW50Rm9sZGVyID0gdGhpcy5nZXRQYXJlbnRGb2xkZXJFbGVtZW50KGFjdGl2ZUZpbGUucGF0aCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Rm9sZGVyLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRlZC1mb2xkZXJcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRQYXJlbnRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIEhpZ2hsaWdodCB0aGUgcm9vdCBmb2xkZXIgaW4gdGhlIHBhdGggdG8gdGhlIGFjdGl2ZSBub3RlXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb290Rm9sZGVyID0gdGhpcy5nZXRSb290Rm9sZGVySW5QYXRoKGFjdGl2ZUZpbGUucGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm9vdEZvbGRlciAmJiByb290Rm9sZGVyICE9PSBjdXJyZW50Rm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdEZvbGRlci5jbGFzc0xpc3QuYWRkKFwiaGlnaGxpZ2h0ZWQtcGFyZW50LWZvbGRlclwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXJlbnRGb2xkZXJFbGVtZW50KGZpbGVQYXRoOiBzdHJpbmcpOiBFbGVtZW50IHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgZm9sZGVyUGF0aHMucG9wKCk7XHJcbiAgICAgICAgbGV0IGZvbGRlckVsZW1lbnQ6IEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGZvbGRlclBhdGhzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyTmFtZSA9IGZvbGRlclBhdGhzLmpvaW4oXCIvXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NzaWJsZUZvbGRlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wYXRoPVwiJHtmb2xkZXJOYW1lfVwiXWApO1xyXG4gICAgICAgICAgICBpZiAocG9zc2libGVGb2xkZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXJFbGVtZW50ID0gcG9zc2libGVGb2xkZXJFbGVtZW50LmNsb3Nlc3QoXCIubmF2LWZvbGRlclwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvbGRlclBhdGhzLnBvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbGRlckVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Um9vdEZvbGRlckluUGF0aChmaWxlUGF0aDogc3RyaW5nKTogRWxlbWVudCB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGhzID0gZmlsZVBhdGguc3BsaXQoXCIvXCIpO1xyXG4gICAgICAgIGZvbGRlclBhdGhzLnBvcCgpO1xyXG5cclxuICAgICAgICBpZiAoZm9sZGVyUGF0aHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCByb290Rm9sZGVyTmFtZSA9IGZvbGRlclBhdGhzWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcGF0aD1cIiR7cm9vdEZvbGRlck5hbWV9XCJdYCk/LmNsb3Nlc3QoXCIubmF2LWZvbGRlclwiKSB8fCBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU3R5bGVzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdHlsZUVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVFbC5pZCA9ICdmb2xkZXItaGlnaGxpZ2h0ZXItc3R5bGVzJztcclxuICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3R5bGVDb250ZW50ID0gYFxyXG4gICAgICAgICAgICAuaGlnaGxpZ2h0ZWQtZm9sZGVyIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRlZEZvbGRlckNvbG9yfSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogJHt0aGlzLnNldHRpbmdzLmhpZ2hsaWdodGVkRm9sZGVyQm9yZGVyUmFkaXVzfSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5oaWdobGlnaHRlZC1mb2xkZXIgPiAubmF2LWZvbGRlci10aXRsZSB7XHJcbiAgICAgICAgICAgICAgICAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0Rm9sZGVyVGl0bGVDb2xvciA/IGBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJUaXRsZUNvbG9yfSAhaW1wb3J0YW50O2AgOiAnJ31cclxuICAgICAgICAgICAgICAgIGNvbG9yOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJUZXh0Q29sb3J9ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJCb3JkZXJSYWRpdXN9ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogJHt0aGlzLnNldHRpbmdzLmhpZ2hsaWdodGVkRm9sZGVyRm9udFdlaWdodH0gIWltcG9ydGFudFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5oaWdobGlnaHRlZC1wYXJlbnQtZm9sZGVyIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlckNvbG9yfSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogJHt0aGlzLnNldHRpbmdzLmhpZ2hsaWdodGVkUGFyZW50Rm9sZGVyQm9yZGVyUmFkaXVzfSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5oaWdobGlnaHRlZC1wYXJlbnQtZm9sZGVyID4gLm5hdi1mb2xkZXItdGl0bGUge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6ICR7dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlclRleHRDb2xvcn0gIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiAke3RoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJGb250V2VpZ2h0fSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogJHt0aGlzLnNldHRpbmdzLmhpZ2hsaWdodGVkUGFyZW50Rm9sZGVyQm9yZGVyUmFkaXVzfSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgICAgICB0aGlzLnN0eWxlRWwudGV4dENvbnRlbnQgPSBzdHlsZUNvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgb251bmxvYWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3R5bGVFbCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlRWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGb2xkZXJIaWdobGlnaHRlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogRm9sZGVySGlnaGxpZ2h0ZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRm9sZGVySGlnaGxpZ2h0ZXIpIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnQWN0aXZlIGZvbGRlcicpLnNldEhlYWRpbmcoKTtcclxuXHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGNvbG9yIHNldHRpbmdzIHdpdGggdHJhbnNwYXJlbmN5IHNsaWRlciBhbmQgcmVzZXQgYnV0dG9uXHJcbiAgICAgICAgY29uc3QgY3JlYXRlQ29sb3JTZXR0aW5nID0gKG5hbWU6IHN0cmluZywgZGVzYzogc3RyaW5nLCBrZXk6IGtleW9mIEZvbGRlckhpZ2hsaWdodGVyU2V0dGluZ3MpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNhdmVkQ29sb3IgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldO1xyXG4gICAgICAgICAgICBsZXQgYWxwaGFWYWx1ZSA9IDE7IC8vIERlZmF1bHQgYWxwaGEgdmFsdWVcclxuXHJcbiAgICAgICAgICAgIC8vIFBhcnNlIGluaXRpYWwgYWxwaGEgdmFsdWUgaWYgcmdiYSBpcyB1c2VkXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2F2ZWRDb2xvciA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gc2F2ZWRDb2xvci5tYXRjaCgvcmdiYVxcKChcXGQrKSwgKFxcZCspLCAoXFxkKyksIChbXFxkLl0rKVxcKS8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFWYWx1ZSA9IHBhcnNlRmxvYXQobWF0Y2hbNF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gKHNhdmVkQ29sb3IgYXMgc3RyaW5nKS5tYXRjaCgvcmdiYVxcKChcXGQrKSwgKFxcZCspLCAoXFxkKyksIChbXFxkLl0rKVxcKS8pO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIGFscGhhVmFsdWUgPSBwYXJzZUZsb2F0KG1hdGNoWzRdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShuYW1lKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoZGVzYylcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoJyNlZWVlZWUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2F2ZWRDb2xvci50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sb3IgcGlja2VyIG5leHQgdG8gdGhlIHRleHQgaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuY2xhc3NMaXN0LmFkZCgnaW5wdXQtd2lkdGgtMTUwJyk7IC8vIEFkanVzdCB0aGUgd2lkdGggb2YgdGhlIHRleHQgZmllbGRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvclBpY2tlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIudHlwZSA9ICdjb2xvcic7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBvbmx5IHRoZSBjb2xvciB3aXRob3V0IGFscGhhIGZvciB0aGUgY29sb3IgcGlja2VyXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmdiQ29sb3IgPSB0aGlzLmV4dHJhY3RSZ2JGcm9tUmdiYShzYXZlZENvbG9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnZhbHVlID0gdGhpcy5yZ2JUb0hleChyZ2JDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIudGl0bGUgPSAnQ2hvb3NlIGEgY29sb3InO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIGhleCBjb2xvciB0byBSR0JcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmdiID0gdGhpcy5oZXhUb1JnYih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2tleV0gPSBgcmdiYSgke3JnYi5yfSwgJHtyZ2IuZ30sICR7cmdiLmJ9LCAke2FscGhhVmFsdWV9KWAgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSgodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQoY29sb3JQaWNrZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHRyYW5zcGFyZW5jeSBzbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc3BhcmVuY3lTbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci50eXBlID0gJ3JhbmdlJztcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVuY3lTbGlkZXIubWluID0gJzAnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci5tYXggPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLnN0ZXAgPSAnMC4wMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLnZhbHVlID0gYWxwaGFWYWx1ZS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci5jbGFzc0xpc3QuYWRkKCdtYXJnaW4tbGVmdC0xMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW5jeVNsaWRlci50aXRsZSA9ICdNb3ZlIHRoZSBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGFWYWx1ZSA9IHBhcnNlRmxvYXQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmdiID0gdGhpcy5oZXhUb1JnYihjb2xvclBpY2tlci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2tleV0gPSBgcmdiYSgke3JnYi5yfSwgJHtyZ2IuZ30sICR7cmdiLmJ9LCAke2FscGhhVmFsdWV9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKCh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Py5hcHBlbmRDaGlsZCh0cmFuc3BhcmVuY3lTbGlkZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHJlc2V0IGJ1dHRvbiBuZXh0IHRvIHRoZSB0cmFuc3BhcmVuY3kgc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzZXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50ZXh0Q29udGVudCA9ICdSZXNldCc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRCdXR0b24udGl0bGUgPSAnUmVzZXQgdG8gcHJldmlvdXMgY29sb3InO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ21hcmdpbi1sZWZ0LTEwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRvIHRoZSBsYXN0IHNhdmVkIGNvbG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2tleV0gPSBzYXZlZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgY29sb3IgcGlja2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJnYkNvbG9yID0gdGhpcy5leHRyYWN0UmdiRnJvbVJnYmEoc2F2ZWRDb2xvci50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIudmFsdWUgPSB0aGlzLnJnYlRvSGV4KHJnYkNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdHJhbnNwYXJlbmN5IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHBoYSA9IHRoaXMuZXh0cmFjdEFscGhhRnJvbVJnYmEoc2F2ZWRDb2xvci50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5U2xpZGVyLnZhbHVlID0gYWxwaGEudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGV4dCBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHNhdmVkQ29sb3IudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKHJlc2V0QnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEhpZ2hsaWdodGVkIFNlY3Rpb24gQ29sb3JcclxuICAgICAgICBjcmVhdGVDb2xvclNldHRpbmcoJ0ZvbGRlciBzZWN0aW9uIGJhY2tncm91bmQtY29sb3InLCAnQ2hvb3NlIGEgYmFja2dyb3VuZC1jb2xvciBvZiB0aGUgYWN0aXZlIGZvbGRlci1jb250YWluZXIuJywgJ2hpZ2hsaWdodGVkRm9sZGVyQ29sb3InKTtcclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0IEZvbGRlciBCYWNrZ3JvdW5kLUNvbG9yXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdGb2xkZXIgYmFja2dyb3VuZCBjb2xvcicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbmFibGUgYmFja2dyb3VuZC1jb2xvciBvZiB0aGUgZm9sZGVyIHRpdGxlLicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEZvbGRlclRpdGxlQ29sb3IpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Rm9sZGVyVGl0bGVDb2xvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJUaXRsZUNvbG9yID0gJyNmZmZmZmYwMCc7IC8vIFJlc2V0IGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlU3R5bGVzKCk7IC8vIFVwZGF0ZSBzdHlsZXMgaW1tZWRpYXRlbHlcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0ZWQgRm9sZGVyIFRpdGxlIENvbG9yXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEZvbGRlclRpdGxlQ29sb3IpIHtcclxuICAgICAgICAgICAgY3JlYXRlQ29sb3JTZXR0aW5nKCdGb2xkZXIgYmFja2dyb3VuZC1jb2xvcicsICdDaG9vc2UgYSBjb2xvciBmb3IgdGhlIGhpZ2hsaWdodGVkIGZvbGRlciB0aXRsZS4nLCAnaGlnaGxpZ2h0ZWRGb2xkZXJUaXRsZUNvbG9yJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdC8vIEhpZ2hsaWdodGVkIEZvbGRlciBUZXh0IENvbG9yXHJcblx0XHRjcmVhdGVDb2xvclNldHRpbmcoJ0ZvbGRlciB0ZXh0IGNvbG9yJywgJ0Nob29zZSBhIGNvbG9yIGZvciB0aGUgaGlnaGxpZ2h0ZWQgZm9sZGVyIHRleHQuJywgJ2hpZ2hsaWdodGVkRm9sZGVyVGV4dENvbG9yJyk7XHJcblxyXG4gICAgICAgIC8vIEhpZ2hsaWdodGVkIEZvbGRlciBGb250IFdlaWdodFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSGlnaGxpZ2h0ZWQgZm9sZGVyIGZvbnQgd2VpZ2h0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgZm9udCB3ZWlnaHQgb2YgdGhlIGhpZ2hsaWdodGVkIGZvbGRlciB0aXRsZXMuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCcyMDAnLCAnVGhpbicpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCc0MDAnLCAnTm9ybWFsJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzcwMCcsICdCb2xkJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZEZvbGRlckZvbnRXZWlnaHQgfHwgJzcwMCcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJGb250V2VpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlU3R5bGVzKCk7IC8vIFVwZGF0ZSBzdHlsZXMgaW1tZWRpYXRlbHlcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0ZWQgRm9sZGVyIEJvcmRlciBSYWRpdXNcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZvbGRlciBib3JkZXIgcmFkaXVzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgYm9yZGVyIHJhZGl1cyBvZiB0aGUgaGlnaGxpZ2h0ZWQgZm9sZGVyLicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCA1MCwgMSkgIC8vIE1pbiwgTWF4LCBTdGVwXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGFyc2VJbnQodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0ZWRGb2xkZXJCb3JkZXJSYWRpdXMpKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhZGl1c1dpdGhQeCA9IGAke3ZhbHVlfXB4YDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZEZvbGRlckJvcmRlclJhZGl1cyA9IHJhZGl1c1dpdGhQeDtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTsgLy8gVXBkYXRlIHN0eWxlcyBpbW1lZGlhdGVseVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpIC8vIEFkZHMgYSB0b29sdGlwIHNob3dpbmcgdGhlIGN1cnJlbnQgdmFsdWVcclxuICAgICAgICAgICAgKTsgIFxyXG5cclxuICAgICAgICBcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnUm9vdCBmb2xkZXInKS5zZXRIZWFkaW5nKCk7XHJcblxyXG4gICAgICAgIC8vIE5ldyBzZXR0aW5nIGZvciBoaWdobGlnaHRpbmcgcm9vdCBmb2xkZXJcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0hpZ2hsaWdodCByb290IGZvbGRlcicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbmFibGUgYmFja2dyb3VuZC1jb2xvciBvZiB0aGUgcm9vdCBmb2xkZXIgc2VnbWVudCBpbiB0aGUgcGF0aCB0byB0aGUgYWN0aXZlIG5vdGUuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0UGFyZW50Rm9sZGVyKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFBhcmVudEZvbGRlciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFJvb3QgRm9sZGVyIENvbG9yXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0UGFyZW50Rm9sZGVyKSB7XHJcblx0XHRcdGNyZWF0ZUNvbG9yU2V0dGluZygnUm9vdCBmb2xkZXIgc2VjdGlvbiBiYWNrZ3JvdW5kLWNvbG9yJywgJ0Nob29zZSBhIGJhY2tncm91bmQtY29sb3Igb2YgdGhlIHJvb3QgZm9sZGVyIHNlZ21lbnQuJywgJ2hpZ2hsaWdodGVkUGFyZW50Rm9sZGVyQ29sb3InKTtcclxuXHRcdFx0Y3JlYXRlQ29sb3JTZXR0aW5nKCdSb290IGZvbGRlciB0ZXh0IGNvbG9yJywgJ0Nob29zZSBhIGNvbG9yIGZvciB0aGUgaGlnaGxpZ2h0ZWQgcm9vdCBmb2xkZXIgdGV4dC4nLCAnaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJUZXh0Q29sb3InKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEhpZ2hsaWdodGVkIFBhcmVudCBGb2xkZXIgRm9udCBXZWlnaHRcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnSGlnaGxpZ2h0ZWQgcm9vdCBmb2xkZXIgZm9udCB3ZWlnaHQnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgZm9udCB3ZWlnaHQgb2YgdGhlIGhpZ2hsaWdodGVkIHBhcmVudCBmb2xkZXIgdGl0bGVzLicpXHJcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCcyMDAnLCAnVGhpbicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignNDAwJywgJ05vcm1hbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignNzAwJywgJ0JvbGQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlckZvbnRXZWlnaHQgfHwgJzcwMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlckZvbnRXZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnVwZGF0ZVN0eWxlcygpOyAvLyBVcGRhdGUgc3R5bGVzIGltbWVkaWF0ZWx5XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSGlnaGxpZ2h0ZWQgUm9vdCBGb2xkZXIgQm9yZGVyIFJhZGl1c1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKCdSb290IGZvbGRlciBib3JkZXIgcmFkaXVzJylcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdTZXQgdGhlIGJvcmRlciByYWRpdXMgb2YgdGhlIGhpZ2hsaWdodGVkIHJvb3QgZm9sZGVyLicpXHJcbiAgICAgICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDUwLCAxKSAgLy8gTWluLCBNYXgsIFN0ZXBcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGFyc2VJbnQodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0ZWRQYXJlbnRGb2xkZXJCb3JkZXJSYWRpdXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzV2l0aFB4ID0gYCR7dmFsdWV9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRlZFBhcmVudEZvbGRlckJvcmRlclJhZGl1cyA9IHJhZGl1c1dpdGhQeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnVwZGF0ZVN0eWxlcygpOyAvLyBVcGRhdGUgc3R5bGVzIGltbWVkaWF0ZWx5XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKSk7ICAvLyBBZGRzIGEgdG9vbHRpcCBzaG93aW5nIHRoZSBjdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBoZXggY29sb3IgdG8gUkdCXHJcbiAgICBoZXhUb1JnYihoZXg6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGJpZ2ludCA9IHBhcnNlSW50KGhleC5zbGljZSgxKSwgMTYpO1xyXG4gICAgICAgIGNvbnN0IHIgPSAoYmlnaW50ID4+IDE2KSAmIDI1NTtcclxuICAgICAgICBjb25zdCBnID0gKGJpZ2ludCA+PiA4KSAmIDI1NTtcclxuICAgICAgICBjb25zdCBiID0gYmlnaW50ICYgMjU1O1xyXG4gICAgICAgIHJldHVybiB7IHIsIGcsIGIgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCBSR0IgdmFsdWVzIGZyb20gUkdCQSBzdHJpbmdcclxuICAgIGV4dHJhY3RSZ2JGcm9tUmdiYShyZ2JhOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IHJnYmEubWF0Y2goL3JnYmE/XFwoKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKS8pO1xyXG4gICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcjogcGFyc2VJbnQobWF0Y2hbMV0pLFxyXG4gICAgICAgICAgICAgICAgZzogcGFyc2VJbnQobWF0Y2hbMl0pLFxyXG4gICAgICAgICAgICAgICAgYjogcGFyc2VJbnQobWF0Y2hbM10pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHI6IDAsIGc6IDAsIGI6IDAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCBhbHBoYSB2YWx1ZSBmcm9tIFJHQkEgc3RyaW5nXHJcbiAgICBleHRyYWN0QWxwaGFGcm9tUmdiYShyZ2JhOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IHJnYmEubWF0Y2goL3JnYmE/XFwoLio/LFxccyooW1xcZC5dKylcXCkvKTtcclxuICAgICAgICByZXR1cm4gbWF0Y2ggPyBwYXJzZUZsb2F0KG1hdGNoWzFdKSA6IDE7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgUkdCIHRvIEhFWFxyXG4gICAgcmdiVG9IZXgocmdiOiB7IHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIgfSkge1xyXG4gICAgICAgIHJldHVybiBcIiNcIiArICgoMSA8PCAyNCkgKyAocmdiLnIgPDwgMTYpICsgKHJnYi5nIDw8IDgpICsgcmdiLmIpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcclxuICAgIH1cclxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBdUQ7QUFnQnZELElBQU0sbUJBQThDO0FBQUEsRUFDaEQsd0JBQXdCO0FBQUEsRUFDeEIsMkJBQTJCO0FBQUEsRUFDM0IsNkJBQTZCO0FBQUEsRUFDaEMsNEJBQTRCO0FBQUEsRUFDekIsdUJBQXVCO0FBQUEsRUFDdkIsOEJBQThCO0FBQUEsRUFDakMsa0NBQWtDO0FBQUEsRUFDL0IsK0JBQStCO0FB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
